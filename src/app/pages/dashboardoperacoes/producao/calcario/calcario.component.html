<div class="container">
    <div class="titulo">
        <p-divider align="left" type="solid">
            <b><a routerLink="../../">Painel Operacional</a> / <a routerLink="../">Produção</a> / Fábricas de Calcário</b>
        </p-divider>
    </div>
    <div class="rows"><!--CArregamentos-->
        <div class="row1">
            <div class="right">
                <div class="titulo">
                    <span> <b> Carregamento geral</b></span><br>
                </div>

                <!-- Indicador de carregamento -->
                <div *ngIf="loading" class="loading-indicator">
                    <p-progressSpinner strokeWidth="6" ariaLabel="loading" />
                </div>

                <div class="carregamento" *ngIf="!loading">
                    <div class="cardCarregmento">
                        <div class="valorCarregamento">
                            <p>{{ movimentacaoDia }}</p>
                        </div>
                        <div class="unidadeCarregamento">
                            <p>Último dia</p>
                        </div>
                    </div>
                    <div class="cardCarregmento">
                        <div class="valorCarregamento">
                            <p>{{ movimentacaoMes }}</p>
                        </div>
                        <div class="unidadeCarregamento">
                            <p>Acomulado mês atual</p>
                        </div>
                    </div>
                    <div class="cardCarregmento">
                        <div class="valorCarregamento">
                            <p>{{ movimentacaoAno }}</p>
                        </div>
                        <div class="unidadeCarregamento">
                            <p>Acomulado ano atual</p>
                        </div>
                    </div>
                </div>
            </div>    
        </div>
        <div class="row2"><!--FCM1-->
            <div class="left">
                <div class="titulo">
                    <i class="pi pi-plus-circle"></i>
                    <span (click)="exibirGrafico()" style="cursor: pointer;"><b>FCMI</b></span><br>
                </div>
        
                <!-- Indicador de carregamento -->
                <div *ngIf="loading" class="loading-indicator">
                    <p-progressSpinner strokeWidth="6" ariaLabel="loading" />
                </div>
        
                <!-- Conteúdo a ser exibido após o carregamento -->
                <div class="cardsAcumulados" *ngIf="!loading">
                    <div class="card">
                        <div class="valor">
                            <p>{{ fcmiTotalDia || 'N/A' }}</p>
                        </div>
                        <div class="unidade">
                            <p>Último dia</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="valor">
                            <p>{{ fcmiTotalMes || 'N/A' }}</p>
                        </div>
                        <div class="unidade">
                            <p>Acumulado mês atual</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="valor">
                            <p>{{ fcmiTotalAno || 'N/A' }}</p>
                        </div>
                        <div class="unidade">
                            <p>Acumulado ano atual</p>
                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="loading" class="loading-indicator">
                <p-progressSpinner strokeWidth="6" ariaLabel="loading" />
            </div>

            <div class="tabelaProdutividade" *ngIf="!loading">
                <div class="titulo">
                    <span><b>Produtividade</b></span><br>
                </div>
                
                <p-table [value]="fcmiDados" [scrollable]="true" scrollHeight="350px">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Período</th>
                            <th>Horas Produção</th>
                            <th>Tn/h</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-fcmiDado>
                        <tr>
                            <td>{{ fcmiDado.dia || fcmiDado.mes || fcmiDado.ano || 'N/A' }}</td>
                            <td>{{ fcmiDado.hsProdDia || fcmiDado.hsProdMes || fcmiDado.hsProdAno || 'N/A' }}</td>
                            <td>{{ fcmiDado.tnHoraDia || fcmiDado.tnHoraMes || fcmiDado.tnHoraAno || 'N/A' }}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>
        </div>
        <div class="row3"><!--FCMII-->
            <div class="left">
                <div class="titulo">
                    <i class="pi pi-plus-circle"></i><span (click)="exibirGrafico()" style="cursor: pointer;"> <b> FCMII </b></span><br>
                </div>
                 <!-- Indicador de carregamento -->
                <div *ngIf="loading2" class="loading-indicator">
                    <p-progressSpinner strokeWidth="6" ariaLabel="loading" />
                </div>
                <div class="cardsAcumulados" *ngIf="!loading2">
                        <div class="card">
                            <div class="valor">
                                <p>{{ fcmiiTotalDia }}</p>
                            </div>
                            <div class="unidade">
                            <p>Último dia</p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="valor">
                                <p>{{ fcmiiTotalMes }}</p>
                            </div>
                            <div class="unidade">
                            <p>Acomulado mês atual</p>
                            </div>
                        </div>
                        <div class="card">
                            <div class="valor">
                                <p>{{ fcmiiTotalAno }}</p>
                            </div>
                            <div class="unidade">
                            <p>Acomulado ano atual</p>
                            </div>
                        </div>
                </div>
            </div>
            <div *ngIf="loading2" class="loading-indicator">
                <p-progressSpinner strokeWidth="6" ariaLabel="loading" />
            </div>
            <div class="tabelaProdutividade" *ngIf="!loading2">   
                <div class="titulo">
                    <span> <b> Produtividade</b></span><br>
                </div>
                <p-table 
                    [value]="fcmiiDados"
                    [scrollable]="true" 
                    scrollHeight="350px"  
                >
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Período</th>
                            <th>Horas Produção</th>
                            <th>Tn/h</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-fcmiiDado>
                        <tr *ngIf="fcmiiDado.dia">
                            <td>{{ fcmiiDado.dia }}</td>
                            <td>{{ fcmiiDado.hsProdDia }}</td>
                            <td>{{ fcmiiDado.tnHoraDia }}</td>
                        </tr>
                        <tr *ngIf="fcmiiDado.mes">
                            <td>{{ fcmiiDado.mes }}</td>
                            <td>{{ fcmiiDado.hsProdMes }}</td>
                            <td>{{ fcmiiDado.tnHoraMes }}</td>
                        </tr>
                        <tr *ngIf="fcmiiDado.ano">
                            <td>{{ fcmiiDado.ano }}</td>
                            <td>{{ fcmiiDado.hsProdAno }}</td>
                            <td>{{ fcmiiDado.tnHoraAno }}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>            
        </div>
        <div class="row4"><!--FCMIII-->
            <div class="left">
                <div class="titulo">
                    <i class="pi pi-plus-circle"></i><span (click)="exibirGrafico()" style="cursor: pointer;"> <b> FCMIII </b></span><br>
                </div>
                <div *ngIf="loading3" class="loading-indicator">
                    <p-progressSpinner strokeWidth="6" ariaLabel="loading" />
                </div>
                <div class="cardsAcumulados" *ngIf="!loading3">
                    <div class="card">
                        <div class="valor">
                            <p>{{ fcmiiiTotalDia }}</p>
                        </div>
                        <div class="unidade">
                        <p>Último dia</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="valor">
                            <p>{{ fcmiiiTotalMes }}</p>
                        </div>
                        <div class="unidade">
                        <p>Acomulado mês atual</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="valor">
                            <p>{{ fcmiiiTotalAno }}</p>
                        </div>
                        <div class="unidade">
                        <p>Acomulado ano atual</p>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="loading3" class="loading-indicator">
                <p-progressSpinner strokeWidth="6" ariaLabel="loading" />
            </div>
            <div class="tabelaProdutividade" *ngIf="!loading3">   
                <div class="titulo">
                    <span> <b> Produtividade</b></span><br>
                </div>
                <p-table 
                    [value]="fcmiiiDados"
                    [scrollable]="true" 
                    scrollHeight="350px"
                    
                >
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Período</th>
                            <th>Horas Produção</th>
                            <th>Tn/h</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-fcmiiiDado>
                        <tr *ngIf="fcmiiiDado.dia">
                            <td>{{ fcmiiiDado.dia }}</td>
                            <td>{{ fcmiiiDado.hsProdDia }}</td>
                            <td>{{ fcmiiiDado.tnHoraDia }}</td>
                        </tr>
                        <tr *ngIf="fcmiiiDado.mes">
                            <td>{{ fcmiiiDado.mes }}</td>
                            <td>{{ fcmiiiDado.hsProdMes }}</td>
                            <td>{{ fcmiiiDado.tnHoraMes }}</td>
                        </tr>
                        <tr *ngIf="fcmiiiDado.ano">
                            <td>{{ fcmiiiDado.ano }}</td>
                            <td>{{ fcmiiiDado.hsProdAno }}</td>
                            <td>{{ fcmiiiDado.tnHoraAno }}</td>
                        </tr>
                    </ng-template>
                </p-table>
            </div>   
        </div>
    </div>
</div>



<!------------------------MOdal---------------------->
<p-dialog 
    [modal]="true"
    [(visible)]="graficoVisivel" 
    [style]="{ width: '90%', height: '90%' }" 
    [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"   
>
    <div class="titulo">
        <p-divider align="left" type="solid">
            <b>Produção  Calcário</b>
        </p-divider> 
    </div>
    <div class="rowBotoes">
        <div 
            class="btnCalc"
            (click)="gerarGrafico('mensal','acumulado')"
            [ngClass]="{'active': selectedButton === 'mensal'}" 
        >
            <p>No mês</p>
        </div>
        <div 
            class="btnCalc" 
            (click)="gerarGrafico('anual','acumulado')"
            [ngClass]="{'active': selectedButton === 'anual'}" 
        >
            <p>No ano</p>
        </div>
    </div>
    <div class="rowBotoesFabricas">
        <div 
            class="btnCalc"
            (click)="gerarGrafico(selectedButton,'acumulado')"
            [ngClass]="{'active': selectedFactory === 'acumulado'}"
        >
            <p>Acumulado</p>
        </div>
        <div 
            class="btnCalc"
           (click)="gerarGrafico(selectedButton,'fcmi')"
           [ngClass]="{'active': selectedFactory === 'fcmi'}"
        >
            <p>FCM I</p>
        </div>
        <div 
            class="btnCalc"
            (click)="gerarGrafico(selectedButton,'fcmii')"
            [ngClass]="{'active': selectedFactory === 'fcmii'}"
        >
            <p>FCM II</p>
        </div>
        <div class="btnCalc"
        (click)="gerarGrafico(selectedButton,'fcmiii')"
        [ngClass]="{'active': selectedFactory === 'fcmiii'}"
        >
            <p>FCM III</p>
        </div>
        <div 
            class="btnCalc" 
        >
            <a (click)="exibirEquipamentos()" style="color: inherit;"><p>Detalhar</p></a>
        </div>
    </div>
    <div class="containerModal">
        <div class="chartRadarAvaliadores">
            <canvas id="graficoTotalProducaoDiariaFcmi"></canvas>
        </div>
        <div class="projecoes">
            <div class="titulo2">
                <span> <b>Média do Período</b></span><br>
            </div>
            <div class="media">
                <div class="card2">
                    <div class="valor">
                        <p>{{ media }}</p>
                    </div>
                    <div class="unidade2">
                        <p>Tn</p>
                    </div>
                </div>
            </div>
            <div class="titulo2">
                <span> <b> Projeção para o Período</b></span><br>
            </div>
            <div class="projecao">
                <div class="card2">
                    <div class="valor">
                        <p>{{ projecao }}</p>
                    </div>
                    <div class="unidade2">
                        <p>Tn</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <br/>
    <div class="containerModal">
        <div class="chartRadarAvaliadores">
            <canvas id="graficoTotalCarregamentoDiario"></canvas>
        </div>
        <div class="projecoes">
            <div class="titulo2">
                <span> <b>Média do Período</b></span><br>
            </div>
            <div class="media">
                <div class="card2">
                    <div class="valor">
                        <p>{{ mediaCarregamento }}</p>
                    </div>
                    <div class="unidade2">
                        <p>Tn</p>
                    </div>
                </div>
            </div>
            <div class="titulo2">
                <span> <b> Projeção para o Período</b></span><br>
            </div>
            <div class="projecao">
                <div class="card2">
                    <div class="valor">
                        <p>{{ projecaoCarregamento }}</p>
                    </div>
                    <div class="unidade2">
                        <p>Tn</p>
                    </div>
                </div>
            </div>
        </div>
    </div>     

</p-dialog>
<!--MODAL EQUIPAMENTOS-->
<p-dialog 
    [modal]="true"
    [(visible)]="equipamentosVisivel" 
    [style]="{ width: '90%', height: '90%' }" 
    [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }"   
>
<div class="titulo">
    <p-divider align="left" type="solid">
        <b>Produtividade Fábricas</b>
    </p-divider>
    <div class="container">
        <div class="rowSuperior">
            <div class="buttons">
                <p-calendar
                    [style]="{'width':'100%'}"
                    id="da" 
                    [(ngModel)]="data"
                    dateFormat="dd/mm/yy"                  
                    [showIcon]="true"
                    placeholder="Data"
                >
                </p-calendar>
                <div class="btnCalcProd" 
                    (click)="calcularEquipamentos(data)">
                    <p>Calcular</p>
                </div>
            </div>    
            <div class="rightEqpto">
                <div class="tituloEqpto">
                    <span> <b>Carregamento geral</b></span><br>
                </div>
                <div class="media2">
                    <div class="cardCarregamentoEqpto">
                        <div class="valorCarregamentoEqpto">
                            <p>{{ totalCarregamento }}</p>
                        </div>
                        <div class="unidadeCarregamentoEqpto">
                            <p>Carregamento geral</p>
                        </div>    
                    </div>
                </div>    
            </div>    
        </div><!--end rowSupeiror-->
        <div class="containerInterno">
            <div class="esquerda">
                <div class="rowWrap">
                    <div class="tituloFab">
                        <b> FCM I </b>
                    </div>
                    <div class="rowEsq">
                        <div class="coluna1">
                            <div class="linha1">
                                <div class="eqpto">
                                    <p>MG-01</p>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiMg01HoraProd }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Hora produção</p>
                                    </div>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiMg01HoraParado }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Hora parado</p>
                                    </div>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiMg01Producao }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Tn produzida</p>
                                    </div>
                                </div>
                            </div>
                            <div class="linha2"><!--MG02-->
                                <div class="eqpto">
                                    <p>MG-02</p>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiMg02HoraProd }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Hora produção</p>
                                    </div>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiMg02HoraParado }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Hora parado</p>
                                    </div>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiMg02Producao }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Tn produzida</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="coluna2">
                            <div class="cardFab">
                                <div class="valorCarregamentoFab">
                                    <p>{{ fcmiProdutividadeGeral }}</p>
                                </div>
                                <div class="unidadeCarregamentoFab">
                                    <p>Produtividade fábrica</p>
                                </div>
                            </div>
                            <div class="cardFab">
                                <div class="valorCarregamentoFab">
                                    <p>{{ fcmiProducaoGeral }}</p>
                                </div>
                                <div class="unidadeCarregamentoFab">
                                    <p>Produção fábrica</p>
                                </div>
                            </div>
                        </div>
                    </div><!--end row1-->
                </div>    
                <div class="rowWrapFCM2">
                    <div class="tituloFab">
                        <b> FCM II </b>
                    </div>
                    <div class="rowEsqFCM2">   
                        <div class="coluna1FCM2">
                            <div class="linha1">
                                <div class="eqpto">
                                    <p>MG-01</p>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiiMg01HoraProd }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Hora produção</p>
                                    </div>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiiMg01HoraParado }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Hora parado</p>
                                    </div>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiiMg01Producao }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Tn produzida</p>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                        <div class="coluna2FCM2">
                            <div class="cardFabFCM2">
                                <div class="valorCarregamentoFab">
                                    <p>{{ fcmiiMg01Produtividade }}</p>
                                </div>
                                <div class="unidadeCarregamentoFab">
                                    <p>Produtividade fábrica</p>
                                </div>
                            </div>
                            <div class="cardFabFCM2">
                                <div class="valorCarregamentoFab">
                                    <p>{{ fcmiiMg01Producao }}</p>
                                </div>
                                <div class="unidadeCarregamentoFab">
                                    <p>Produção fábrica</p>
                                </div>
                            </div>
                        </div>
                    </div><!--end row2-->
                </div><!--EndTitle-->    
                <div class="rowWrap">
                    <div class="tituloFab">
                        <b> FCM III </b>
                    </div>
                    <div class="rowEsq">
                        <div class="coluna1FCM3">
                            <div class="linha1">
                                <div class="eqpto">
                                    <p>MG-01</p>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiiiMg01HoraProd }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Hora produção</p>
                                    </div>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiiiMg01HoraParado }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Hora parado</p>
                                    </div>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiiiMg01Producao }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Tn produzida</p>
                                    </div>
                                </div>
                            </div>
                            <div class="linha2">
                                <div class="eqpto">
                                    <p>MG-02</p>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiiiMg02HoraProd }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Hora produção</p>
                                    </div>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiiiMg02HoraParado }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Hora parado</p>
                                    </div>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiiiMg02Producao }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Tn produzida</p>
                                    </div>
                                </div>
                            </div>
                            <div class="linha3">
                                <div class="eqpto">
                                    <p>MG-03</p>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiiiMg03HoraProd }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Hora produção</p>
                                    </div>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiiiMg03HoraParado }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Hora parado</p>
                                    </div>
                                </div>
                                <div class="cardProd">
                                    <div class="valorCarregamentoProd">
                                        <p>{{ fcmiiiMg03Producao }}</p>
                                    </div>
                                    <div class="unidadeCarregamentoProd">
                                        <p>Tn produzida</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="coluna2FCM3">
                            <div class="cardFab">
                                <div class="valorCarregamentoFab">
                                    <p>{{ fcmiiiProdutividadeGera }}</p>
                                </div>
                                <div class="unidadeCarregamentoFab">
                                    <p>Produtividade fábrica</p>
                                </div>
                            </div>
                            <div class="cardFab">
                                <div class="valorCarregamentoFab">
                                    <p>{{ fcmiiiProducaoGeral }}</p>
                                </div>
                                <div class="unidadeCarregamentoFab">
                                    <p>Produção fábrica</p>
                                </div>
                            </div>
                        </div>
                    </div><!--end row3-->
                </div>       
            </div><!--end Esquerda-->
            <div class="direita">
                <div class="totais">
                    <div class="cardFabDir">
                        <div class="valorCarregamentoFab">
                            <p>{{ produtividadeFabricasGeral }}</p>
                        </div>
                        <div class="unidadeCarregamentoFab">
                            <p>Produtividade</p>
                        </div>
                    </div>
                    <div class="cardFabDir">
                        <div class="valorCarregamentoFab">
                            <p>{{ producaoGeralFabrica }}</p>
                        </div>
                        <div class="unidadeCarregamentoFab">
                            <p>Produção diária</p>
                        </div>
                    </div>
                    <div class="cardFabDir">
                        <div class="valorCarregamentoFab">
                            <p>{{ estoqueTotal }}</p>
                        </div>
                        <div class="unidadeCarregamentoFab">
                            <p>Estoque calcário</p>
                        </div>
                    </div>
                </div>
            </div><!--End Direita-->
        </div><!--end containerInterno--> 
    </div><!--end container--> 
</div>
</p-dialog>