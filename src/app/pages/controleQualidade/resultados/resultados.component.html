<div class="menu">
    <ul nz-menu nzMode="horizontal" style="overflow-x: auto; white-space: nowrap; background-color:#f2f2f2;height: 40px;box-shadow: 2px 0 6px ; ">
        <li nz-menu-item nzMatchRouter="#">
            <a style="font-size: 13px;" routerLink="/welcome/controleQualidade/dashControle">In√≠cio</a>
        </li>
        <li *ngIf="hasGroup(['Admin','Master','LabGestor','LabOp'])" nz-submenu nzTitle="Cadastros "  style="font-size: 13px; ">
            <ul>
                <li *ngIf="hasGroup(['Admin','Master','LabGestor','LabOp'])" nz-menu-item  nzMatchRouter>
                    <a routerLink="/welcome/controleQualidade/tipoEnsaio">Tipo de Ensaio</a>
                </li>
                <li *ngIf="hasGroup(['Admin','Master','LabGestor','LabOp'])" nz-menu-item  nzMatchRouter>
                    <a routerLink="/welcome/controleQualidade/variavel">Vari√°veis de Ensaio</a>
                </li>
                <li *ngIf="hasGroup(['Admin','Master','LabGestor','LabOp'])" nz-menu-item  nzMatchRouter>
                    <a routerLink="/welcome/controleQualidade/ensaio" >Ensaio</a>
                </li>
                <li *ngIf="hasGroup(['Admin','Master','LabGestor','LabOp'])" nz-menu-item  nzMatchRouter>
                    <a routerLink="/welcome/controleQualidade/calculoEnsaio" >C√°lculo de Ensaio</a>
                </li>
                <li *ngIf="hasGroup(['Admin','Master','LabGestor','LabOp'])" nz-menu-item  nzMatchRouter>
                    <a routerLink="/welcome/controleQualidade/plano" >Plano de An√°lise</a>
                </li>
                <li *ngIf="hasGroup(['Admin','Master','LabGestor','LabOp'])" nz-menu-item  nzMatchRouter>
                    <a routerLink="/welcome/controleQualidade/tipoAmostra" >Tipo de Amostra</a>
                </li>
                <li *ngIf="hasGroup(['Admin','Master','LabGestor','LabOp'])" nz-menu-item  nzMatchRouter>
                    <a routerLink="/welcome/controleQualidade/produtoAmostra" >Produto de Amostra</a>
                </li>
                <li *ngIf="hasGroup(['Admin','Master','LabGestor','LabOp'])" nz-menu-item  nzMatchRouter>
                    <a routerLink="/welcome/controleQualidade/garantia" >Garantias</a>
                </li>
            </ul>
        </li >
        <li nz-menu-item nzMatchRouter="#" *ngIf="hasGroup(['Admin','Master','LabGestor','LabOp'])">
            <a style="font-size: 13px;" routerLink="/welcome/controleQualidade/amostra">Amostras</a>
        </li>

        <li nz-menu-item nzMatchRouter="#" *ngIf="hasGroup(['Admin','Master','LabGestor','LabOp'])">
            <a style="font-size: 13px;" routerLink="/welcome/controleQualidade/ordem">Ordens de Servi√ßo</a>
        </li>

        <li nz-menu-item nzMatchRouter="#" *ngIf="hasGroup(['Admin','Master','LabGestor','LabOp'])">
            <a style="font-size: 13px;" routerLink="/welcome/controleQualidade/arquivo">Banco de An√°lises</a>
        </li>

        <li nz-menu-item nzMatchRouter="#" *ngIf="hasGroup(['Admin','Master','LabGestor','LabOp'])">
            <a style="font-size: 13px;">Banco de Relat√≥rios</a>
        </li>

         <li nz-menu-item nzMatchRouter="#" *ngIf="hasGroup(['Admin','Master','LabGestor','LabOp'])">
            <a style="font-size: 13px;" routerLink="/welcome/controleQualidade/resultados">Hist√≥rico de Resultados</a>
        </li>
        <li nz-menu-item nzMatchRouter="#" *ngIf="hasGroup(['Admin','Master','LabGestor','LabOp'])">
            <a style="font-size: 13px;" routerLink="/welcome/controleQualidade/acompanhamento">Acompanhamento de Tempo</a>
        </li>
    </ul>
</div>

<div class="container flex flex-column align-items-center mb-4">
    <p-toast></p-toast>
    <div class="containerInterno w-12">
        <div @swipeAnimation>
            <div class="form-geral flex flex-column gap-3 w-12 lg:flex-row">
                <div class="fg1 flex flex-column w-12 align-items-center">
                    <p-card class="card w-12 text-left">
                        <ng-template #header>
                            <div class="header titulo-info w-full text-center">
                                <h2>Hist√≥rico de Resultados</h2>
                            </div>
                        </ng-template>
                        <div *ngIf="hasGroup(['Admin','Master','RHGestor'])" class="w-full">
                            
                            <!-- Filtros de Data -->
                            <div class="flex flex-column w-full lg:flex-row gap-3 mb-4">
                                <div class="w-12 lg:w-4">
                                    <p-floatlabel variant="on">
                                        <p-datepicker
                                            [style]="{'width':'100%'}"
                                            id="dataInicio" 
                                            [(ngModel)]="data_inicio"
                                            dateFormat="dd/mm/yy"                  
                                            [showIcon]="true"
                                        />
                                        <label for="dataInicio">Data Inicial</label>
                                    </p-floatlabel> 
                                </div>
                                <div class="w-12 lg:w-4">
                                    <p-floatlabel variant="on">
                                        <p-datepicker
                                            [style]="{'width':'100%'}"
                                            id="dataFim" 
                                            [(ngModel)]="data_fim"
                                            dateFormat="dd/mm/yy"                  
                                            [showIcon]="true"
                                        />
                                        <label for="dataFim">Data Final</label>
                                    </p-floatlabel> 
                                </div>
                                <div class="w-12 text-left lg:w-4">
                                    <p-floatLabel variant="on">
                                        <p-multiselect 
                                            inputId="float-label" 
                                            [style]="{'width':'100%'}" 
                                            [options]="produtosAmostra"
                                            [(ngModel)]="produtosSelecionados"
                                            optionLabel="nome" 
                                            optionValue="id" 
                                            appendTo="body" 
                                            [filter]="true"
                                            filterBy="nome" 
                                            [showClear]="true">
                                        </p-multiselect>
                                        <label for="float-label">Produto da Amostra</label>
                                    </p-floatLabel>
                                </div>
                            </div>

                            <!-- Se√ß√£o de Ensaios -->
                            <div class="mb-4">
                                <h3 class="mb-3" style="color: #e6defa;">üìä M√©dias de Ensaios</h3>
                                <div class="flex flex-column w-full lg:flex-row gap-3">
                                    <div class="w-12 lg:w-10">
                                        <p-floatlabel variant="on">
                                            <p-multiSelect 
                                                [(ngModel)]="ensaiosSelecionados"
                                                [options]="ensaios"
                                                optionLabel="descricao"
                                                optionValue="id"
                                                display="chip"
                                                [filter]="true"
                                                id="ensaiosSelect"
                                                filterBy="descricao"
                                                [style]="{width: '100%'}"
                                                appendTo="body"
                                            ></p-multiSelect>
                                            <label for="ensaiosSelect">Selecione o(s) Ensaio(s)</label>
                                        </p-floatlabel>
                                    </div>
                                    <div class="w-12 lg:w-2">
                                        <p-button 
                                            label="Buscar" 
                                            icon="pi pi-search"
                                            (onClick)="buscarMediasEnsaios()"
                                            [style]="{width: '100%'}"
                                            severity="success"
                                        />
                                    </div>
                                </div>

                                <!-- Cards de Resultados de Ensaios -->
                                <div *ngIf="mediasEnsaios && mediasEnsaios.length > 0" class="mt-4">
                                    <div class="mb-3">
                                        <h4 style="color: #b3e5ff; font-weight: bold;">üìä Total de Ensaios: {{ totalEnsaios }}</h4>
                                    </div>
                                    <div class="grid">
                                        <div *ngFor="let resultado of mediasEnsaios" class="col-12 md:col-6 lg:col-4">
                                            <div class="shadow-2 border-round h-full overflow-hidden" style="background-color: #2d3748;">
                                                <!-- Header com gradiente -->
                                                <div class="p-3" style="background: linear-gradient(135deg, #2b3a55 0%, #1a2537 100%);">
                                                    <h4 class="m-0 text-white font-bold text-center">{{ resultado.ensaio_descricao }}</h4>
                                                </div>
                                                <!-- Conte√∫do do card -->
                                                <div class="p-4 flex flex-column gap-3">
                                                    <!-- M√©dia -->
                                                    <div>
                                                        <p class="text-sm mb-2" style="color: #a0aec0;">M√©dia:</p>
                                                        <p-tag 
                                                            [value]="(resultado.media | number:'1.2-4') + ' ' + resultado.unidade" 
                                                            severity="success"
                                                            styleClass="text-base font-semibold"
                                                        ></p-tag>
                                                    </div>

                                                    <!-- Valor M√≠nimo -->
                                                    <div>
                                                        <p class="text-sm mb-2" style="color: #a0aec0;">Valor M√≠nimo:</p>
                                                        <p-tag 
                                                            [value]="(resultado.valor_minimo | number:'1.2-4') ?? '-'" 
                                                            severity="warn"
                                                            styleClass="text-base font-semibold"
                                                        ></p-tag>
                                                    </div>

                                                    <!-- Valor M√°ximo -->
                                                    <div>
                                                        <p class="text-sm mb-2" style="color: #a0aec0;">Valor M√°ximo:</p>
                                                        <p-tag 
                                                            [value]="(resultado.valor_maximo | number:'1.2-4') ?? '-'" 
                                                            severity="info"
                                                            styleClass="text-base font-semibold"
                                                        ></p-tag>
                                                    </div>

                                                    <!-- Medi√ß√µes -->
                                                    <div>
                                                        <p class="text-sm mb-2" style="color: #a0aec0;">An√°lises:</p>
                                                        <p-tag 
                                                            [value]="resultado.quantidade_medicoes.toString()" 
                                                            severity="secondary"
                                                            [rounded]="true"
                                                        ></p-tag>
                                                    </div>

                                                    <!-- Detalhes das Medi√ß√µes -->
                                                    <div *ngIf="resultado.detalhes && resultado.detalhes.length > 0" class="mt-3">
                                                        <p-inplace [closable]="true">
                                                            <ng-template pTemplate="display">
                                                                <div class="flex align-items-center gap-2 cursor-pointer">
                                                                    <i class="pi pi-eye" style="color: #667eea;"></i>
                                                                    <span class="font-semibold text-sm" style="color: #667eea;">Ver Detalhes</span>
                                                                </div>
                                                            </ng-template>
                                                            <ng-template pTemplate="content">
                                                                <div class="grid mt-2">
                                                                    <div class="col-12" *ngFor="let detalhe of resultado.detalhes">
                                                                        <div class="shadow-1 border-round p-3 mb-2 cursor-pointer hover:shadow-3 transition-duration-200" 
                                                                             style="background-color: #1a202c;"
                                                                             (click)="visualizarAnalise(detalhe.analise_id)">
                                                                            <!-- Nome do Ensaio -->
                                                                            <div class="mb-2">
                                                                                <p class="text-xs mb-1" style="color: #718096;">Ensaio</p>
                                                                                <p class="text-base font-bold m-0" style="color: #48bb78;">
                                                                                    {{ resultado.ensaio_nome }}
                                                                                </p>
                                                                            </div>
                                                                            
                                                                            <!-- Amostra -->
                                                                            <div class="mb-2">
                                                                                <p class="text-xs mb-1" style="color: #718096;">Amostra</p>
                                                                                <p class="text-base font-semibold m-0" style="color: #e2e8f0;">
                                                                                    {{ detalhe.amostra_numero }}
                                                                                </p>
                                                                            </div>
                                                                            
                                                                            <!-- An√°lise ID -->
                                                                            <div class="mb-2">
                                                                                <p class="text-xs mb-1" style="color: #718096;">An√°lise</p>
                                                                                <p class="text-base font-bold m-0" style="color: #667eea;">
                                                                                    #{{ detalhe.analise_id }}
                                                                                </p>
                                                                            </div>

                                                                            <!-- Valor -->
                                                                            <div>
                                                                                <p class="text-xs mb-1" style="color: #718096;">Valor</p>
                                                                                <p-tag 
                                                                                    [value]="(detalhe.valor | number:'1.2-4') + ' ' + resultado.unidade" 
                                                                                    severity="success"
                                                                                    styleClass="text-sm font-semibold"
                                                                                ></p-tag>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </ng-template>
                                                        </p-inplace>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Se√ß√£o de C√°lculos -->
                            <div class="mb-4">
                                <h3 class="mb-3" style="color: #e6defa;">üßÆ M√©dias de C√°lculos Compostos</h3>
                                <div class="flex flex-column w-full lg:flex-row gap-3">
                                    <div class="w-12 lg:w-10">
                                        <p-floatlabel variant="on">
                                            <p-multiSelect 
                                                [(ngModel)]="calculosSelecionados"
                                                [options]="calculos"
                                                optionLabel="descricao"
                                                optionValue="descricao"
                                                display="chip"
                                                [filter]="true"
                                                id="calculosSelect"
                                                filterBy="descricao"
                                                [style]="{width: '100%'}"
                                                appendTo="body"
                                            ></p-multiSelect>
                                            <label for="calculosSelect">Selecione o(s) C√°lculo(s) Composto(s)</label>
                                        </p-floatlabel>
                                    </div>
                                    <div class="w-12 lg:w-2">
                                        <p-button 
                                            label="Buscar" 
                                            icon="pi pi-search"
                                            (onClick)="buscarMediasCalculos()"
                                            [style]="{width: '100%'}"
                                            severity="info"
                                        />
                                    </div>
                                </div>

                                <!-- Cards de Resultados de C√°lculos -->
                                <div *ngIf="mediasCalculos && mediasCalculos.length > 0" class="mt-4">
                                    <div class="mb-3">
                                        <h4 style="color: #b2f5ea; font-weight: bold;">üßÆ Total de C√°lculos: {{ totalCalculos }}</h4>
                                    </div>
                                    <div class="grid">
                                        <div *ngFor="let resultado of mediasCalculos" class="col-12 md:col-6 lg:col-4">
                                            <div class="shadow-2 border-round h-full overflow-hidden" style="background-color: #2d3748;">
                                                <!-- Header com gradiente -->
                                                <div class="p-3" style="background: linear-gradient(135deg, #26413c 0%, #1a2e2a 100%);">
                                                    <h4 class="m-0 text-white font-bold text-center">{{ resultado.calculo }}</h4>
                                                </div>
                                                <!-- Conte√∫do do card -->
                                                <div class="p-4 flex flex-column gap-3">
                                                    <!-- M√©dia -->
                                                    <div>
                                                        <p class="text-sm mb-2" style="color: #a0aec0;">M√©dia:</p>
                                                        <p-tag 
                                                            [value]="(resultado.media | number:'1.2-4') ?? '-'" 
                                                            severity="success"
                                                            styleClass="text-base font-semibold"
                                                        ></p-tag>
                                                    </div>

                                                    <!-- Valor M√≠nimo -->
                                                    <div>
                                                        <p class="text-sm mb-2" style="color: #a0aec0;">Valor M√≠nimo:</p>
                                                        <p-tag 
                                                            [value]="(resultado.valor_minimo | number:'1.2-4') ?? '-'" 
                                                            severity="warn"
                                                            styleClass="text-base font-semibold"
                                                        ></p-tag>
                                                    </div>

                                                    <!-- Valor M√°ximo -->
                                                    <div>
                                                        <p class="text-sm mb-2" style="color: #a0aec0;">Valor M√°ximo:</p>
                                                        <p-tag 
                                                            [value]="((resultado.valor_maximo?.parsedValue !== undefined ? resultado.valor_maximo.parsedValue : resultado.valor_maximo) | number:'1.2-4') ?? '-'" 
                                                            severity="info"
                                                            styleClass="text-base font-semibold"
                                                        ></p-tag>
                                                    </div>

                                                    <!-- An√°lises -->
                                                    <div>
                                                        <p class="text-sm mb-2" style="color: #a0aec0;">An√°lises:</p>
                                                        <p-tag 
                                                            [value]="resultado.quantidade_analises.toString()" 
                                                            severity="secondary"
                                                            [rounded]="true"
                                                        ></p-tag>
                                                    </div>

                                                    <!-- Detalhes das An√°lises -->
                                                    <div *ngIf="resultado.detalhes && resultado.detalhes.length > 0" class="mt-3">
                                                        <p-inplace [closable]="true">
                                                            <ng-template pTemplate="display">
                                                                <div class="flex align-items-center gap-2 cursor-pointer">
                                                                    <i class="pi pi-eye" style="color: #667eea;"></i>
                                                                    <span class="font-semibold text-sm" style="color: #667eea;">Ver Detalhes</span>
                                                                </div>
                                                            </ng-template>
                                                            <ng-template pTemplate="content">
                                                                <div class="grid mt-2">
                                                                    <div class="col-12" *ngFor="let detalhe of resultado.detalhes">
                                                                        <div class="shadow-1 border-round p-3 mb-2 cursor-pointer hover:shadow-3 transition-duration-200" 
                                                                             style="background-color: #1a202c;"
                                                                             (click)="visualizarAnalise(detalhe.analise_id)">
                                                                            <!-- Nome do C√°lculo -->
                                                                            <div class="mb-2">
                                                                                <p class="text-xs mb-1" style="color: #718096;">C√°lculo</p>
                                                                                <p class="text-base font-bold m-0" style="color: #ed8936;">
                                                                                    {{ resultado.calculo_nome }}
                                                                                </p>
                                                                            </div>
                                                                            
                                                                            <!-- Amostra -->
                                                                            <div class="mb-2">
                                                                                <p class="text-xs mb-1" style="color: #718096;">Amostra</p>
                                                                                <p class="text-base font-semibold m-0" style="color: #e2e8f0;">
                                                                                    {{ detalhe.amostra_numero }}
                                                                                </p>
                                                                            </div>
                                                                            
                                                                            <!-- An√°lise ID -->
                                                                            <div class="mb-2">
                                                                                <p class="text-xs mb-1" style="color: #718096;">An√°lise</p>
                                                                                <p class="text-base font-bold m-0" style="color: #667eea;">
                                                                                    #{{ detalhe.analise_id }}
                                                                                </p>
                                                                            </div>

                                                                            <!-- Valor -->
                                                                            <div>
                                                                                <p class="text-xs mb-1" style="color: #718096;">Valor</p>
                                                                                <p-tag 
                                                                                    [value]="(detalhe.valor | number:'1.2-4') ?? '-'" 
                                                                                    severity="success"
                                                                                    styleClass="text-sm font-semibold"
                                                                                ></p-tag>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </ng-template>
                                                        </p-inplace>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </p-card>
                </div>
            </div>
        </div>
    </div>
</div>
<!---------------------------------Modal Visualiza√ß√£o---------------------------------------------->
    <p-drawer 
        header="Visualizar OS" 
        [(visible)]="modalVisualizar" 
        position="left"
        styleClass="w-full md:w-10 lg:w-10 custom-drawer"
        [style]="{ height: '100vh' }"        
    >
        <div *ngIf="analiseSelecionada">
            <!-- Card de Dados -->
            <div class="mb-4">
                <div
                    class="shadow-2 hover:shadow-4 transition-duration-200 p-4"
                    style="border-radius: 12px; background-color: #4a4458;"
                >
                    <div class="flex align-items-center mb-3">
                        <i class="pi pi-info-circle mr-2" style="color: #e3d8ff; font-size: 1.5rem;"></i>
                        <h3 class="m-0" style="color: #e3d8ff;">Dados da OS</h3>
                    </div>
                    <div class="text-left" style="color: #e6defa;">
                        <p class="mb-2"><b>N√∫mero:</b> {{ analiseSelecionada.amostra_detalhes.numero }}</p>
                        <p class="mb-2"><b>Produto:</b> {{ analiseSelecionada.amostra_detalhes.produto_amostra_detalhes?.nome }}</p>
                        <p class="mb-2"><b>Classifica√ß√£o:</b> {{ analiseSelecionada.amostra_detalhes.expressa_detalhes?.classificacao || analiseSelecionada.amostra_detalhes.ordem_detalhes?.classificacao }}</p>
                        <p class="mb-2"><b>Respons√°vel:</b> {{ analiseSelecionada.amostra_detalhes.expressa_detalhes?.responsavel || analiseSelecionada.amostra_detalhes.ordem_detalhes?.responsavel }}</p>
                        <p class="mb-0"><b>Data de Abertura:</b> {{ (analiseSelecionada.amostra_detalhes.expressa_detalhes?.data || analiseSelecionada.amostra_detalhes.ordem_detalhes?.data) | date:'dd/MM/yyyy'}}</p>
                    </div>
                </div>
            </div>

            <!-- Cards de Ensaios Compostos -->
            <div *ngIf="analiseSelecionada?.ultimo_calculo?.length > 0">
                <h3 class="mb-3" style="color: #e6defa;">üß™ Ensaios Compostos</h3>
                <div class="grid">
                    <div class="col-12" *ngFor="let ultimo_calculo of analiseSelecionada.ultimo_calculo">
                        <div
                            class="shadow-2 hover:shadow-4 transition-duration-200 p-4 mb-3"
                            style="border-radius: 12px; background-color: #2b3a55;"
                        >
                            <div class="flex align-items-center mb-3">
                                <i class="pi pi-flask mr-2" style="color: #b3e5ff; font-size: 1.3rem;"></i>
                                <h4 class="m-0" style="color: #d6f1ff;">{{ ultimo_calculo.calculos }}</h4>
                            </div>
                            <div class="mb-3 p-3" style="background-color: rgba(179, 229, 255, 0.1); border-radius: 8px;">
                                <p class="text-xl mb-0" style="color: #d6f1ff;"><b>Resultado:</b> <span style="font-size: 1.5rem; font-weight: 700;">{{ ultimo_calculo.resultados }}</span></p>
                            </div>
                            
                            <div *ngIf="ultimo_calculo.ensaios_utilizados?.length > 0">
                                <h5 class="mb-3" style="color: #b3e5ff;">Ensaios Utilizados</h5>
                                <div class="grid">
                                    <div class="col-12 md:col-6 lg:col-4" *ngFor="let ensaios_utilizados of ultimo_calculo.ensaios_utilizados">
                                        <div
                                            class="shadow-2 hover:shadow-3 transition-duration-200"
                                            style="height: 100px; border-radius: 10px; background-color: #1e2f45; position: relative; cursor: pointer;"
                                        >
                                            <i class="pi pi-check-circle" style="position: absolute; top: 8px; left: 8px; color: #b3e5ff; font-size: 1rem;"></i>
                                            <div
                                                style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #d6f1ff; font-size: 1.4rem; font-weight: 700; text-align: center;"
                                            >
                                                {{ ensaios_utilizados.valor }}
                                            </div>
                                            <div class="flex align-items-end h-full">
                                                <span class="p-2 text-xs font-semibold" style="color: #d6f1ff;">{{ ensaios_utilizados.descricao }}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cards de Ensaios Diretos -->
            <div *ngIf="analiseSelecionada?.ultimo_ensaio?.ensaios_utilizados?.length > 0">
                <h3 class="mb-3" style="color: #e6defa;">üî¨ Ensaios Diretos</h3>
                <div class="grid">
                    <div class="col-12 md:col-6 lg:col-4" *ngFor="let ensaios_utilizados of analiseSelecionada.ultimo_ensaio.ensaios_utilizados">
                        <div
                            class="shadow-2 hover:shadow-4 transition-duration-200"
                            style="height: 120px; border-radius: 12px; background-color: #26413c; position: relative; cursor: pointer;"
                        >
                            <i class="pi pi-chart-bar" style="position: absolute; top: 12px; left: 12px; color: #b2f5ea; font-size: 1.25rem;"></i>
                            <div
                                style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #ccfbf1; font-size: 1.8rem; font-weight: 700; text-align: center;"
                            >
                                {{ ensaios_utilizados.valor }}
                            </div>
                            <div class="flex align-items-end h-full">
                                <span class="p-3 text-sm font-semibold" style="color: #ccfbf1;">{{ ensaios_utilizados.descricao }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Cards de Varia√ß√£o Dimensional -->
            <div *ngIf="analiseSelecionada?.variacao_dimensional">
                <h3 class="mb-3" style="color: #e6defa;">üìê Varia√ß√£o Dimensional Linear</h3>
                <div class="grid">
                    
                    <!-- L0 - Medi√ß√µes Iniciais -->
                    <div class="col-12 md:col-6 lg:col-3" *ngIf="analiseSelecionada.variacao_dimensional.l0">
                        <div
                            class="shadow-2 hover:shadow-4 transition-duration-200 p-3"
                            style="border-radius: 12px; background-color: #4a4458; min-height: 200px;"
                        >
                            <div class="flex align-items-center mb-3">
                                <i class="pi pi-ruler" style="color: #e3d8ff; font-size: 1.2rem; margin-right: 8px;"></i>
                                <h5 class="m-0" style="color: #e3d8ff;">L0 - Inicial</h5>
                            </div>
                            <div style="color: #e6defa; font-size: 0.9rem;">
                                <p class="mb-2"><b>Data:</b> {{ analiseSelecionada.variacao_dimensional.l0.data | date:'dd/MM/yyyy' }}</p>
                                <p class="mb-1"><b>CP1:</b> {{ analiseSelecionada.variacao_dimensional.l0.cp1 }} mm</p>
                                <p class="mb-1"><b>CP2:</b> {{ analiseSelecionada.variacao_dimensional.l0.cp2 }} mm</p>
                                <p class="mb-0"><b>CP3:</b> {{ analiseSelecionada.variacao_dimensional.l0.cp3 }} mm</p>
                            </div>
                        </div>
                    </div>

                    <!-- L1 - 1 dia -->
                    <div class="col-12 md:col-6 lg:col-3" *ngIf="analiseSelecionada.variacao_dimensional.l1">
                        <div
                            class="shadow-2 hover:shadow-4 transition-duration-200 p-3"
                            style="border-radius: 12px; background-color: #2b3a55; min-height: 200px;"
                        >
                            <div class="flex align-items-center mb-3">
                                <i class="pi pi-calendar" style="color: #b3e5ff; font-size: 1.2rem; margin-right: 8px;"></i>
                                <h5 class="m-0" style="color: #b3e5ff;">L1 - 1 dia</h5>
                            </div>
                            <!-- Aviso de Status -->
                            <div class="mb-2 p-2 text-center" 
                                 [style.background-color]="getStatusL1(analiseSelecionada.variacao_dimensional.l0?.data).cor + '20'"
                                 style="border-radius: 8px; border-left: 4px solid"
                                 [style.border-color]="getStatusL1(analiseSelecionada.variacao_dimensional.l0?.data).cor">
                                <i class="pi" [ngClass]="getStatusL1(analiseSelecionada.variacao_dimensional.l0?.data).icone" 
                                   [style.color]="getStatusL1(analiseSelecionada.variacao_dimensional.l0?.data).cor"></i>
                                <span class="ml-2 font-bold" 
                                      [style.color]="getStatusL1(analiseSelecionada.variacao_dimensional.l0?.data).cor"
                                      style="font-size: 0.85rem;">
                                    {{ getStatusL1(analiseSelecionada.variacao_dimensional.l0?.data).status }}
                                </span>
                            </div>
                            <div style="color: #d6f1ff; font-size: 0.9rem;">
                                <p class="mb-2"><b>Data:</b> {{ analiseSelecionada.variacao_dimensional.l1.data | date:'dd/MM/yyyy' }}</p>
                                <p class="mb-1"><b>CP1:</b> {{ analiseSelecionada.variacao_dimensional.l1.cp1 }} mm</p>
                                <p class="mb-1"><b>CP2:</b> {{ analiseSelecionada.variacao_dimensional.l1.cp2 }} mm</p>
                                <p class="mb-2"><b>CP3:</b> {{ analiseSelecionada.variacao_dimensional.l1.cp3 }} mm</p>
                                <div class="mt-2 p-2 text-center" style="background-color: rgba(179, 229, 255, 0.15); border-radius: 8px;">
                                    <p class="font-bold mb-1" style="color: #b3e5ff;">M√©dia: {{ analiseSelecionada.variacao_dimensional.l1.media | number:'1.2-4' }} %</p>
                                    <p class="text-xs mb-0" style="color: #d6f1ff;">Desvio: {{ analiseSelecionada.variacao_dimensional.l1.desvio_padrao | number:'1.2-4' }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- L7 - 7 dias -->
                    <div class="col-12 md:col-6 lg:col-3" *ngIf="analiseSelecionada.variacao_dimensional.l7">
                        <div
                            class="shadow-2 hover:shadow-4 transition-duration-200 p-3"
                            style="border-radius: 12px; background-color: #26413c; min-height: 200px;"
                        >
                            <div class="flex align-items-center mb-3">
                                <i class="pi pi-calendar-plus" style="color: #b2f5ea; font-size: 1.2rem; margin-right: 8px;"></i>
                                <h5 class="m-0" style="color: #b2f5ea;">L7 - 7 dias</h5>
                            </div>
                            <!-- Aviso de Status -->
                            <div class="mb-2 p-2 text-center" 
                                 [style.background-color]="getStatusL7(analiseSelecionada.variacao_dimensional.l0?.data).cor + '20'"
                                 style="border-radius: 8px; border-left: 4px solid"
                                 [style.border-color]="getStatusL7(analiseSelecionada.variacao_dimensional.l0?.data).cor">
                                <i class="pi" [ngClass]="getStatusL7(analiseSelecionada.variacao_dimensional.l0?.data).icone" 
                                   [style.color]="getStatusL7(analiseSelecionada.variacao_dimensional.l0?.data).cor"></i>
                                <span class="ml-2 font-bold" 
                                      [style.color]="getStatusL7(analiseSelecionada.variacao_dimensional.l0?.data).cor"
                                      style="font-size: 0.85rem;">
                                    {{ getStatusL7(analiseSelecionada.variacao_dimensional.l0?.data).status }}
                                </span>
                            </div>
                            <div style="color: #ccfbf1; font-size: 0.9rem;">
                                <p class="mb-2"><b>Data:</b> {{ analiseSelecionada.variacao_dimensional.l7.data | date:'dd/MM/yyyy' }}</p>
                                <p class="mb-1"><b>CP1:</b> {{ analiseSelecionada.variacao_dimensional.l7.cp1 }} mm</p>
                                <p class="mb-1"><b>CP2:</b> {{ analiseSelecionada.variacao_dimensional.l7.cp2 }} mm</p>
                                <p class="mb-2"><b>CP3:</b> {{ analiseSelecionada.variacao_dimensional.l7.cp3 }} mm</p>
                                <div class="mt-2 p-2 text-center" style="background-color: rgba(178, 245, 234, 0.15); border-radius: 8px;">
                                    <p class="font-bold mb-1" style="color: #b2f5ea;">M√©dia: {{ analiseSelecionada.variacao_dimensional.l7.media | number:'1.2-4' }} %</p>
                                    <p class="text-xs mb-0" style="color: #ccfbf1;">Desvio: {{ analiseSelecionada.variacao_dimensional.l7.desvio_padrao | number:'1.2-4' }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- L28 - 28 dias -->
                    <div class="col-12 md:col-6 lg:col-3" *ngIf="analiseSelecionada.variacao_dimensional.l28">
                        <div
                            class="shadow-2 hover:shadow-4 transition-duration-200 p-3"
                            style="border-radius: 12px; background-color: #3b3b32; min-height: 200px;"
                        >
                            <div class="flex align-items-center mb-3">
                                <i class="pi pi-calendar-times" style="color: #fff3b0; font-size: 1.2rem; margin-right: 8px;"></i>
                                <h5 class="m-0" style="color: #fff3b0;">L28 - 28 dias</h5>
                            </div>
                            <!-- Aviso de Status -->
                            <div class="mb-2 p-2 text-center" 
                                 [style.background-color]="getStatusL28(analiseSelecionada.variacao_dimensional.l0?.data).cor + '20'"
                                 style="border-radius: 8px; border-left: 4px solid"
                                 [style.border-color]="getStatusL28(analiseSelecionada.variacao_dimensional.l0?.data).cor">
                                <i class="pi" [ngClass]="getStatusL28(analiseSelecionada.variacao_dimensional.l0?.data).icone" 
                                   [style.color]="getStatusL28(analiseSelecionada.variacao_dimensional.l0?.data).cor"></i>
                                <span class="ml-2 font-bold" 
                                      [style.color]="getStatusL28(analiseSelecionada.variacao_dimensional.l0?.data).cor"
                                      style="font-size: 0.85rem;">
                                    {{ getStatusL28(analiseSelecionada.variacao_dimensional.l0?.data).status }}
                                </span>
                            </div>
                            <div style="color: #fff2a8; font-size: 0.9rem;">
                                <p class="mb-2"><b>Data:</b> {{ analiseSelecionada.variacao_dimensional.l28.data | date:'dd/MM/yyyy' }}</p>
                                <p class="mb-1"><b>CP1:</b> {{ analiseSelecionada.variacao_dimensional.l28.cp1 }} mm</p>
                                <p class="mb-1"><b>CP2:</b> {{ analiseSelecionada.variacao_dimensional.l28.cp2 }} mm</p>
                                <p class="mb-2"><b>CP3:</b> {{ analiseSelecionada.variacao_dimensional.l28.cp3 }} mm</p>
                                <div class="mt-2 p-2 text-center" style="background-color: rgba(255, 243, 176, 0.15); border-radius: 8px;">
                                    <p class="font-bold mb-1" style="color: #fff3b0;">M√©dia: {{ analiseSelecionada.variacao_dimensional.l28.media | number:'1.2-4' }} %</p>
                                    <p class="text-xs mb-0" style="color: #fff2a8;">Desvio: {{ analiseSelecionada.variacao_dimensional.l28.desvio_padrao | number:'1.2-4' }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Cards de Varia√ß√£o de Massa -->
            <div *ngIf="analiseSelecionada?.variacao_massa">
                <h3 class="mb-3" style="color: #e6defa;">‚öñÔ∏è Varia√ß√£o de Massa</h3>
                <div class="grid">
                    
                    <!-- M0 - Massa Inicial -->
                    <div class="col-12 md:col-6 lg:col-3" *ngIf="analiseSelecionada.variacao_massa.m0">
                        <div
                            class="shadow-2 hover:shadow-4 transition-duration-200 p-3"
                            style="border-radius: 12px; background-color: #4a4458; min-height: 200px;"
                        >
                            <div class="flex align-items-center mb-3">
                                <i class="pi pi-box" style="color: #e3d8ff; font-size: 1.2rem; margin-right: 8px;"></i>
                                <h5 class="m-0" style="color: #e3d8ff;">M0 - Inicial</h5>
                            </div>
                            <div style="color: #e6defa; font-size: 0.9rem;">
                                <p class="mb-2"><b>Data:</b> {{ analiseSelecionada.variacao_massa.m0.data | date:'dd/MM/yyyy' }}</p>
                                <p class="mb-1"><b>CP1:</b> {{ analiseSelecionada.variacao_massa.m0.cp1 }} g</p>
                                <p class="mb-1"><b>CP2:</b> {{ analiseSelecionada.variacao_massa.m0.cp2 }} g</p>
                                <p class="mb-0"><b>CP3:</b> {{ analiseSelecionada.variacao_massa.m0.cp3 }} g</p>
                            </div>
                        </div>
                    </div>

                    <!-- M1 - 1 dia -->
                    <div class="col-12 md:col-6 lg:col-3" *ngIf="analiseSelecionada.variacao_massa.m1">
                        <div
                            class="shadow-2 hover:shadow-4 transition-duration-200 p-3"
                            style="border-radius: 12px; background-color: #2b3a55; min-height: 200px;"
                        >
                            <div class="flex align-items-center mb-3">
                                <i class="pi pi-calendar" style="color: #b3e5ff; font-size: 1.2rem; margin-right: 8px;"></i>
                                <h5 class="m-0" style="color: #b3e5ff;">M1 - 1 dia</h5>
                            </div>
                            <!-- Aviso de Status -->
                            <div class="mb-2 p-2 text-center" 
                                 [style.background-color]="getStatusM1(analiseSelecionada.variacao_massa.m0?.data).cor + '20'"
                                 style="border-radius: 8px; border-left: 4px solid"
                                 [style.border-color]="getStatusM1(analiseSelecionada.variacao_massa.m0?.data).cor">
                                <i class="pi" [ngClass]="getStatusM1(analiseSelecionada.variacao_massa.m0?.data).icone" 
                                   [style.color]="getStatusM1(analiseSelecionada.variacao_massa.m0?.data).cor"></i>
                                <span class="ml-2 font-bold" 
                                      [style.color]="getStatusM1(analiseSelecionada.variacao_massa.m0?.data).cor"
                                      style="font-size: 0.85rem;">
                                    {{ getStatusM1(analiseSelecionada.variacao_massa.m0?.data).status }}
                                </span>
                            </div>
                            <div style="color: #d6f1ff; font-size: 0.9rem;">
                                <p class="mb-2"><b>Data:</b> {{ analiseSelecionada.variacao_massa.m1.data | date:'dd/MM/yyyy' }}</p>
                                <p class="mb-1"><b>CP1:</b> {{ analiseSelecionada.variacao_massa.m1.cp1 }} g</p>
                                <p class="mb-1"><b>CP2:</b> {{ analiseSelecionada.variacao_massa.m1.cp2 }} g</p>
                                <p class="mb-2"><b>CP3:</b> {{ analiseSelecionada.variacao_massa.m1.cp3 }} g</p>
                                <div class="mt-2 p-2 text-center" style="background-color: rgba(179, 229, 255, 0.15); border-radius: 8px;">
                                    <p class="font-bold mb-1" style="color: #b3e5ff;">M√©dia: {{ analiseSelecionada.variacao_massa.m1.media | number:'1.2-4' }} %</p>
                                    <p class="text-xs mb-0" style="color: #d6f1ff;">Desvio: {{ analiseSelecionada.variacao_massa.m1.desvio_padrao | number:'1.2-4' }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- M7 - 7 dias -->
                    <div class="col-12 md:col-6 lg:col-3" *ngIf="analiseSelecionada.variacao_massa.m7">
                        <div
                            class="shadow-2 hover:shadow-4 transition-duration-200 p-3"
                            style="border-radius: 12px; background-color: #26413c; min-height: 200px;"
                        >
                            <div class="flex align-items-center mb-3">
                                <i class="pi pi-calendar-plus" style="color: #b2f5ea; font-size: 1.2rem; margin-right: 8px;"></i>
                                <h5 class="m-0" style="color: #b2f5ea;">M7 - 7 dias</h5>
                            </div>
                            <!-- Aviso de Status -->
                            <div class="mb-2 p-2 text-center" 
                                 [style.background-color]="getStatusM7(analiseSelecionada.variacao_massa.m0?.data).cor + '20'"
                                 style="border-radius: 8px; border-left: 4px solid"
                                 [style.border-color]="getStatusM7(analiseSelecionada.variacao_massa.m0?.data).cor">
                                <i class="pi" [ngClass]="getStatusM7(analiseSelecionada.variacao_massa.m0?.data).icone" 
                                   [style.color]="getStatusM7(analiseSelecionada.variacao_massa.m0?.data).cor"></i>
                                <span class="ml-2 font-bold" 
                                      [style.color]="getStatusM7(analiseSelecionada.variacao_massa.m0?.data).cor"
                                      style="font-size: 0.85rem;">
                                    {{ getStatusM7(analiseSelecionada.variacao_massa.m0?.data).status }}
                                </span>
                            </div>
                            <div style="color: #ccfbf1; font-size: 0.9rem;">
                                <p class="mb-2"><b>Data:</b> {{ analiseSelecionada.variacao_massa.m7.data | date:'dd/MM/yyyy' }}</p>
                                <p class="mb-1"><b>CP1:</b> {{ analiseSelecionada.variacao_massa.m7.cp1 }} g</p>
                                <p class="mb-1"><b>CP2:</b> {{ analiseSelecionada.variacao_massa.m7.cp2 }} g</p>
                                <p class="mb-2"><b>CP3:</b> {{ analiseSelecionada.variacao_massa.m7.cp3 }} g</p>
                                <div class="mt-2 p-2 text-center" style="background-color: rgba(178, 245, 234, 0.15); border-radius: 8px;">
                                    <p class="font-bold mb-1" style="color: #b2f5ea;">M√©dia: {{ analiseSelecionada.variacao_massa.m7.media | number:'1.2-4' }} %</p>
                                    <p class="text-xs mb-0" style="color: #ccfbf1;">Desvio: {{ analiseSelecionada.variacao_massa.m7.desvio_padrao | number:'1.2-4' }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- M28 - 28 dias -->
                    <div class="col-12 md:col-6 lg:col-3" *ngIf="analiseSelecionada.variacao_massa.m28">
                        <div
                            class="shadow-2 hover:shadow-4 transition-duration-200 p-3"
                            style="border-radius: 12px; background-color: #3b3b32; min-height: 200px;"
                        >
                            <div class="flex align-items-center mb-3">
                                <i class="pi pi-calendar-times" style="color: #fff3b0; font-size: 1.2rem; margin-right: 8px;"></i>
                                <h5 class="m-0" style="color: #fff3b0;">M28 - 28 dias</h5>
                            </div>
                            <!-- Aviso de Status -->
                            <div class="mb-2 p-2 text-center" 
                                 [style.background-color]="getStatusM28(analiseSelecionada.variacao_massa.m0?.data).cor + '20'"
                                 style="border-radius: 8px; border-left: 4px solid"
                                 [style.border-color]="getStatusM28(analiseSelecionada.variacao_massa.m0?.data).cor">
                                <i class="pi" [ngClass]="getStatusM28(analiseSelecionada.variacao_massa.m0?.data).icone" 
                                   [style.color]="getStatusM28(analiseSelecionada.variacao_massa.m0?.data).cor"></i>
                                <span class="ml-2 font-bold" 
                                      [style.color]="getStatusM28(analiseSelecionada.variacao_massa.m0?.data).cor"
                                      style="font-size: 0.85rem;">
                                    {{ getStatusM28(analiseSelecionada.variacao_massa.m0?.data).status }}
                                </span>
                            </div>
                            <div style="color: #fff2a8; font-size: 0.9rem;">
                                <p class="mb-2"><b>Data:</b> {{ analiseSelecionada.variacao_massa.m28.data | date:'dd/MM/yyyy' }}</p>
                                <p class="mb-1"><b>CP1:</b> {{ analiseSelecionada.variacao_massa.m28.cp1 }} g</p>
                                <p class="mb-1"><b>CP2:</b> {{ analiseSelecionada.variacao_massa.m28.cp2 }} g</p>
                                <p class="mb-2"><b>CP3:</b> {{ analiseSelecionada.variacao_massa.m28.cp3 }} g</p>
                                <div class="mt-2 p-2 text-center" style="background-color: rgba(255, 243, 176, 0.15); border-radius: 8px;">
                                    <p class="font-bold mb-1" style="color: #fff3b0;">M√©dia: {{ analiseSelecionada.variacao_massa.m28.media | number:'1.2-4' }} %</p>
                                    <p class="text-xs mb-0" style="color: #fff2a8;">Desvio: {{ analiseSelecionada.variacao_massa.m28.desvio_padrao | number:'1.2-4' }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Cards de M√≥dulo de Elasticidade -->
            <div *ngIf="analiseSelecionada?.modulo_elasticidade">
                <h3 class="mb-3" style="color: #e6defa;">üìä M√≥dulo de Elasticidade</h3>
                
                <!-- Card de M√©dia Geral -->
                <div class="mb-4" *ngIf="analiseSelecionada.modulo_elasticidade.media">
                    <div
                        class="shadow-2 hover:shadow-4 transition-duration-200 p-4"
                        style="border-radius: 12px; background-color: #4a4458;"
                    >
                        <div class="flex align-items-center justify-content-center">
                            <i class="pi pi-chart-line mr-3" style="color: #e3d8ff; font-size: 2rem;"></i>
                            <div class="text-center">
                                <p class="mb-1" style="color: #e6defa; font-size: 0.9rem;">M√≥dulo de Elasticidade M√©dio (Ed)</p>
                                <p class="mb-0" style="color: #e3d8ff; font-size: 2rem; font-weight: 700;">
                                    {{ analiseSelecionada.modulo_elasticidade.media.ed | number:'1.2-4' }} MPa
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Cards dos Corpos de Prova -->
                <div class="grid">
                    
                    <!-- CP1 -->
                    <div class="col-12 md:col-6 lg:col-4" *ngIf="analiseSelecionada.modulo_elasticidade.cp1">
                        <div
                            class="shadow-2 hover:shadow-4 transition-duration-200 p-3"
                            style="border-radius: 12px; background-color: #2b3a55; min-height: 380px;"
                        >
                            <div class="flex align-items-center mb-3">
                                <i class="pi pi-building" style="color: #b3e5ff; font-size: 1.2rem; margin-right: 8px;"></i>
                                <h5 class="m-0" style="color: #b3e5ff;">CP1</h5>
                            </div>
                            <div style="color: #d6f1ff; font-size: 0.85rem;">
                                <!-- Resultado Principal -->
                                <div class="mb-3 p-2 text-center" style="background-color: rgba(179, 229, 255, 0.15); border-radius: 8px;">
                                    <p class="mb-1" style="color: #b3e5ff; font-size: 0.75rem;">Ed (MPa)</p>
                                    <p class="mb-0 font-bold" style="color: #b3e5ff; font-size: 1.3rem;">
                                        {{ analiseSelecionada.modulo_elasticidade.cp1.ed | number:'1.2-4' }}
                                    </p>
                                </div>
                                
                                <!-- Dimens√µes -->
                                <p class="mb-1"><b>Comprimento:</b> {{ analiseSelecionada.modulo_elasticidade.cp1.comprimento }} mm</p>
                                <p class="mb-1"><b>Largura:</b> {{ analiseSelecionada.modulo_elasticidade.cp1.largura }} mm</p>
                                <p class="mb-1"><b>Altura:</b> {{ analiseSelecionada.modulo_elasticidade.cp1.altura }} mm</p>
                                <p class="mb-2"><b>Volume:</b> {{ analiseSelecionada.modulo_elasticidade.cp1.volume | number:'1.2-2' }} mm¬≥</p>
                                
                                <!-- Massa e Carga -->
                                <p class="mb-1"><b>Massa:</b> {{ analiseSelecionada.modulo_elasticidade.cp1.massa }} g</p>
                                <p class="mb-2"><b>P M√°x:</b> {{ analiseSelecionada.modulo_elasticidade.cp1.pMax | number:'1.2-4' }} kN</p>
                                
                                <!-- Tempos -->
                                <p class="mb-1"><b>Tempo 1:</b> {{ analiseSelecionada.modulo_elasticidade.cp1.tempo1 }} ¬µs</p>
                                <p class="mb-1"><b>Tempo 2:</b> {{ analiseSelecionada.modulo_elasticidade.cp1.tempo2 }} ¬µs</p>
                                <p class="mb-1"><b>Tempo 3:</b> {{ analiseSelecionada.modulo_elasticidade.cp1.tempo3 }} ¬µs</p>
                                <p class="mb-2"><b>Menor Tempo:</b> {{ analiseSelecionada.modulo_elasticidade.cp1.menorTempo }} ¬µs</p>
                                
                                <!-- Velocidade -->
                                <p class="mb-0"><b>Velocidade:</b> {{ analiseSelecionada.modulo_elasticidade.cp1.velocidade | number:'1.2-4' }} km/s</p>
                            </div>
                        </div>
                    </div>

                    <!-- CP2 -->
                    <div class="col-12 md:col-6 lg:col-4" *ngIf="analiseSelecionada.modulo_elasticidade.cp2">
                        <div
                            class="shadow-2 hover:shadow-4 transition-duration-200 p-3"
                            style="border-radius: 12px; background-color: #26413c; min-height: 380px;"
                        >
                            <div class="flex align-items-center mb-3">
                                <i class="pi pi-building" style="color: #b2f5ea; font-size: 1.2rem; margin-right: 8px;"></i>
                                <h5 class="m-0" style="color: #b2f5ea;">CP2</h5>
                            </div>
                            <div style="color: #ccfbf1; font-size: 0.85rem;">
                                <!-- Resultado Principal -->
                                <div class="mb-3 p-2 text-center" style="background-color: rgba(178, 245, 234, 0.15); border-radius: 8px;">
                                    <p class="mb-1" style="color: #b2f5ea; font-size: 0.75rem;">Ed (MPa)</p>
                                    <p class="mb-0 font-bold" style="color: #b2f5ea; font-size: 1.3rem;">
                                        {{ analiseSelecionada.modulo_elasticidade.cp2.ed | number:'1.2-4' }}
                                    </p>
                                </div>
                                
                                <!-- Dimens√µes -->
                                <p class="mb-1"><b>Comprimento:</b> {{ analiseSelecionada.modulo_elasticidade.cp2.comprimento }} mm</p>
                                <p class="mb-1"><b>Largura:</b> {{ analiseSelecionada.modulo_elasticidade.cp2.largura }} mm</p>
                                <p class="mb-1"><b>Altura:</b> {{ analiseSelecionada.modulo_elasticidade.cp2.altura }} mm</p>
                                <p class="mb-2"><b>Volume:</b> {{ analiseSelecionada.modulo_elasticidade.cp2.volume | number:'1.2-2' }} mm¬≥</p>
                                
                                <!-- Massa e Carga -->
                                <p class="mb-1"><b>Massa:</b> {{ analiseSelecionada.modulo_elasticidade.cp2.massa }} g</p>
                                <p class="mb-2"><b>P M√°x:</b> {{ analiseSelecionada.modulo_elasticidade.cp2.pMax | number:'1.2-4' }} kN</p>
                                
                                <!-- Tempos -->
                                <p class="mb-1"><b>Tempo 1:</b> {{ analiseSelecionada.modulo_elasticidade.cp2.tempo1 }} ¬µs</p>
                                <p class="mb-1"><b>Tempo 2:</b> {{ analiseSelecionada.modulo_elasticidade.cp2.tempo2 }} ¬µs</p>
                                <p class="mb-1"><b>Tempo 3:</b> {{ analiseSelecionada.modulo_elasticidade.cp2.tempo3 }} ¬µs</p>
                                <p class="mb-2"><b>Menor Tempo:</b> {{ analiseSelecionada.modulo_elasticidade.cp2.menorTempo }} ¬µs</p>
                                
                                <!-- Velocidade -->
                                <p class="mb-0"><b>Velocidade:</b> {{ analiseSelecionada.modulo_elasticidade.cp2.velocidade | number:'1.2-4' }} km/s</p>
                            </div>
                        </div>
                    </div>

                    <!-- CP3 -->
                    <div class="col-12 md:col-6 lg:col-4" *ngIf="analiseSelecionada.modulo_elasticidade.cp3">
                        <div
                            class="shadow-2 hover:shadow-4 transition-duration-200 p-3"
                            style="border-radius: 12px; background-color: #3b3b32; min-height: 380px;"
                        >
                            <div class="flex align-items-center mb-3">
                                <i class="pi pi-building" style="color: #fff3b0; font-size: 1.2rem; margin-right: 8px;"></i>
                                <h5 class="m-0" style="color: #fff3b0;">CP3</h5>
                            </div>
                            <div style="color: #fff2a8; font-size: 0.85rem;">
                                <!-- Resultado Principal -->
                                <div class="mb-3 p-2 text-center" style="background-color: rgba(255, 243, 176, 0.15); border-radius: 8px;">
                                    <p class="mb-1" style="color: #fff3b0; font-size: 0.75rem;">Ed (MPa)</p>
                                    <p class="mb-0 font-bold" style="color: #fff3b0; font-size: 1.3rem;">
                                        {{ analiseSelecionada.modulo_elasticidade.cp3.ed | number:'1.2-4' }}
                                    </p>
                                </div>
                                
                                <!-- Dimens√µes -->
                                <p class="mb-1"><b>Comprimento:</b> {{ analiseSelecionada.modulo_elasticidade.cp3.comprimento }} mm</p>
                                <p class="mb-1"><b>Largura:</b> {{ analiseSelecionada.modulo_elasticidade.cp3.largura }} mm</p>
                                <p class="mb-1"><b>Altura:</b> {{ analiseSelecionada.modulo_elasticidade.cp3.altura }} mm</p>
                                <p class="mb-2"><b>Volume:</b> {{ analiseSelecionada.modulo_elasticidade.cp3.volume | number:'1.2-2' }} mm¬≥</p>
                                
                                <!-- Massa e Carga -->
                                <p class="mb-1"><b>Massa:</b> {{ analiseSelecionada.modulo_elasticidade.cp3.massa }} g</p>
                                <p class="mb-2"><b>P M√°x:</b> {{ analiseSelecionada.modulo_elasticidade.cp3.pMax | number:'1.2-4' }} kN</p>
                                
                                <!-- Tempos -->
                                <p class="mb-1"><b>Tempo 1:</b> {{ analiseSelecionada.modulo_elasticidade.cp3.tempo1 }} ¬µs</p>
                                <p class="mb-1"><b>Tempo 2:</b> {{ analiseSelecionada.modulo_elasticidade.cp3.tempo2 }} ¬µs</p>
                                <p class="mb-1"><b>Tempo 3:</b> {{ analiseSelecionada.modulo_elasticidade.cp3.tempo3 }} ¬µs</p>
                                <p class="mb-2"><b>Menor Tempo:</b> {{ analiseSelecionada.modulo_elasticidade.cp3.menorTempo }} ¬µs</p>
                                
                                <!-- Velocidade -->
                                <p class="mb-0"><b>Velocidade:</b> {{ analiseSelecionada.modulo_elasticidade.cp3.velocidade | number:'1.2-4' }} km/s</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Cards de Deslizamento (Colantes) -->
            <div *ngIf="analiseSelecionada?.deslizamento">
                <h3 class="mb-3" style="color: #e6defa;">üìè Deslizamento (Colantes)</h3>
                
                <!-- Card de Resultado Principal -->
                <div class="mb-4" *ngIf="analiseSelecionada.deslizamento.resultado !== null && analiseSelecionada.deslizamento.resultado !== undefined">
                    <div class="shadow-3 hover:shadow-5 transition-duration-200 p-4" 
                         style="border-radius: 12px; background: linear-gradient(135deg, #8b4789 0%, #6a3567 100%);">
                        <div class="flex align-items-center justify-content-between">
                            <div>
                                <p class="text-white text-sm mb-2 font-semibold">Resultado do Deslizamento</p>
                                <p class="text-white text-5xl font-bold m-0">
                                    {{ analiseSelecionada.deslizamento.resultado | number:'1.2-2' }} mm
                                </p>
                            </div>
                            <i class="pi pi-arrow-down-right text-6xl text-white" style="opacity: 0.3;"></i>
                        </div>
                    </div>
                </div>

                <!-- Tabela de Medidas -->
                <div class="mb-4">
                    <div class="shadow-2 p-3" style="border-radius: 12px; background-color: #2b3a55;">
                        <h4 class="mb-3 text-white">üìä Medidas</h4>
                        <div class="grid">
                            <!-- Medidas Iniciais -->
                            <div class="col-12 lg:col-6">
                                <div class="p-3" style="border-radius: 8px; background-color: rgba(139, 71, 137, 0.2); border-left: 4px solid #8b4789;">
                                    <h5 class="mb-3" style="color: #8b4789;">Medidas Iniciais (mm)</h5>
                                    <div class="grid">
                                        <div class="col-6 md:col-4" *ngIf="analiseSelecionada.deslizamento.medida_inicial_1 !== null && analiseSelecionada.deslizamento.medida_inicial_1 !== undefined">
                                            <p class="text-xs mb-1" style="color: #999;">Medida 1</p>
                                            <p class="font-bold mb-0" style="color: #8b4789;">{{ analiseSelecionada.deslizamento.medida_inicial_1 | number:'1.2-2' }}</p>
                                        </div>
                                        <div class="col-6 md:col-4" *ngIf="analiseSelecionada.deslizamento.medida_inicial_2 !== null && analiseSelecionada.deslizamento.medida_inicial_2 !== undefined">
                                            <p class="text-xs mb-1" style="color: #999;">Medida 2</p>
                                            <p class="font-bold mb-0" style="color: #8b4789;">{{ analiseSelecionada.deslizamento.medida_inicial_2 | number:'1.2-2' }}</p>
                                        </div>
                                        <div class="col-6 md:col-4" *ngIf="analiseSelecionada.deslizamento.medida_inicial_3 !== null && analiseSelecionada.deslizamento.medida_inicial_3 !== undefined">
                                            <p class="text-xs mb-1" style="color: #999;">Medida 3</p>
                                            <p class="font-bold mb-0" style="color: #8b4789;">{{ analiseSelecionada.deslizamento.medida_inicial_3 | number:'1.2-2' }}</p>
                                        </div>
                                        <div class="col-6 md:col-4" *ngIf="analiseSelecionada.deslizamento.medida_inicial_4 !== null && analiseSelecionada.deslizamento.medida_inicial_4 !== undefined">
                                            <p class="text-xs mb-1" style="color: #999;">Medida 4</p>
                                            <p class="font-bold mb-0" style="color: #8b4789;">{{ analiseSelecionada.deslizamento.medida_inicial_4 | number:'1.2-2' }}</p>
                                        </div>
                                        <div class="col-6 md:col-4" *ngIf="analiseSelecionada.deslizamento.medida_inicial_5 !== null && analiseSelecionada.deslizamento.medida_inicial_5 !== undefined">
                                            <p class="text-xs mb-1" style="color: #999;">Medida 5</p>
                                            <p class="font-bold mb-0" style="color: #8b4789;">{{ analiseSelecionada.deslizamento.medida_inicial_5 | number:'1.2-2' }}</p>
                                        </div>
                                        <div class="col-6 md:col-4" *ngIf="analiseSelecionada.deslizamento.medida_inicial_6 !== null && analiseSelecionada.deslizamento.medida_inicial_6 !== undefined">
                                            <p class="text-xs mb-1" style="color: #999;">Medida 6</p>
                                            <p class="font-bold mb-0" style="color: #8b4789;">{{ analiseSelecionada.deslizamento.medida_inicial_6 | number:'1.2-2' }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Medidas Finais -->
                            <div class="col-12 lg:col-6">
                                <div class="p-3" style="border-radius: 8px; background-color: rgba(136, 36, 71, 0.2); border-left: 4px solid #882447;">
                                    <h5 class="mb-3" style="color: #882447;">Medidas Finais (mm)</h5>
                                    <div class="grid">
                                        <div class="col-6 md:col-4" *ngIf="analiseSelecionada.deslizamento.medida_final_1 !== null && analiseSelecionada.deslizamento.medida_final_1 !== undefined">
                                            <p class="text-xs mb-1" style="color: #999;">Medida 1</p>
                                            <p class="font-bold mb-0" style="color: #882447;">{{ analiseSelecionada.deslizamento.medida_final_1 | number:'1.2-2' }}</p>
                                        </div>
                                        <div class="col-6 md:col-4" *ngIf="analiseSelecionada.deslizamento.medida_final_2 !== null && analiseSelecionada.deslizamento.medida_final_2 !== undefined">
                                            <p class="text-xs mb-1" style="color: #999;">Medida 2</p>
                                            <p class="font-bold mb-0" style="color: #882447;">{{ analiseSelecionada.deslizamento.medida_final_2 | number:'1.2-2' }}</p>
                                        </div>
                                        <div class="col-6 md:col-4" *ngIf="analiseSelecionada.deslizamento.medida_final_3 !== null && analiseSelecionada.deslizamento.medida_final_3 !== undefined">
                                            <p class="text-xs mb-1" style="color: #999;">Medida 3</p>
                                            <p class="font-bold mb-0" style="color: #882447;">{{ analiseSelecionada.deslizamento.medida_final_3 | number:'1.2-2' }}</p>
                                        </div>
                                        <div class="col-6 md:col-4" *ngIf="analiseSelecionada.deslizamento.medida_final_4 !== null && analiseSelecionada.deslizamento.medida_final_4 !== undefined">
                                            <p class="text-xs mb-1" style="color: #999;">Medida 4</p>
                                            <p class="font-bold mb-0" style="color: #882447;">{{ analiseSelecionada.deslizamento.medida_final_4 | number:'1.2-2' }}</p>
                                        </div>
                                        <div class="col-6 md:col-4" *ngIf="analiseSelecionada.deslizamento.medida_final_5 !== null && analiseSelecionada.deslizamento.medida_final_5 !== undefined">
                                            <p class="text-xs mb-1" style="color: #999;">Medida 5</p>
                                            <p class="font-bold mb-0" style="color: #882447;">{{ analiseSelecionada.deslizamento.medida_final_5 | number:'1.2-2' }}</p>
                                        </div>
                                        <div class="col-6 md:col-4" *ngIf="analiseSelecionada.deslizamento.medida_final_6 !== null && analiseSelecionada.deslizamento.medida_final_6 !== undefined">
                                            <p class="text-xs mb-1" style="color: #999;">Medida 6</p>
                                            <p class="font-bold mb-0" style="color: #882447;">{{ analiseSelecionada.deslizamento.medida_final_6 | number:'1.2-2' }}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Cards de Peneiras Secas -->
            <div *ngIf="analiseSelecionada?.peneiras?.peneiras && analiseSelecionada.peneiras.peneiras.length > 0">
                <h3 class="mb-3" style="color: #e6defa;">üî¨ Peneiras Secas</h3>
                
                <!-- Informa√ß√µes Gerais -->
                <div class="mb-4">
                    <div class="grid">
                        <div class="col-12 md:col-6">
                            <div
                                class="shadow-2 hover:shadow-4 transition-duration-200 p-3"
                                style="border-radius: 12px; background-color: #2b3a55;"
                            >
                                <div class="flex align-items-center justify-content-center">
                                    <i class="pi pi-box mr-2" style="color: #b3e5ff; font-size: 1.5rem;"></i>
                                    <div>
                                        <p class="mb-1" style="color: #d6f1ff; font-size: 0.8rem;">Massa da Amostra</p>
                                        <p class="mb-0" style="color: #b3e5ff; font-size: 1.5rem; font-weight: 700;">
                                            {{ analiseSelecionada.peneiras.amostra | number:'1.2-2' }} g
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 md:col-6">
                            <div
                                class="shadow-2 hover:shadow-4 transition-duration-200 p-3"
                                style="border-radius: 12px; background-color: #26413c;"
                            >
                                <div class="flex align-items-center justify-content-center">
                                    <i class="pi pi-filter mr-2" style="color: #b2f5ea; font-size: 1.5rem;"></i>
                                    <div>
                                        <p class="mb-1" style="color: #ccfbf1; font-size: 0.8rem;">Total de Finos</p>
                                        <p class="mb-0" style="color: #b2f5ea; font-size: 1.5rem; font-weight: 700;">
                                            {{ analiseSelecionada.peneiras.finos | number:'1.2-2' }} g
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabela de Peneiras -->
                <div class="mb-3">
                    <div
                        class="shadow-2 p-3"
                        style="border-radius: 12px; background-color: #2b3a55; overflow-x: auto;"
                    >
                        <p-table [value]="analiseSelecionada.peneiras.peneiras" styleClass="p-datatable-sm">
                            <ng-template pTemplate="header">
                                <tr style="background-color: rgba(179, 229, 255, 0.1);">
                                    <th style="color: #b3e5ff;">Peneira</th>
                                    <th style="color: #b3e5ff;">Retido (g)</th>
                                    <th style="color: #b3e5ff;">Retido (%)</th>
                                    <th style="color: #b3e5ff;">Passante (%)</th>
                                    <th style="color: #b3e5ff;">Acumulado (%)</th>
                                    <th style="color: #b3e5ff;">Passante Acumulado (%)</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-linha>
                                <tr style="color: #d6f1ff;">
                                    <td><b>{{ linha.peneira }}</b></td>
                                    <td>{{ linha.valor_retido | number:'1.2-2' }}</td>
                                    <td>{{ linha.porcentual_retido | number:'1.2-2' }}</td>
                                    <td>{{ linha.passante | number:'1.2-2' }}</td>
                                    <td>{{ linha.acumulado | number:'1.2-2' }}</td>
                                    <td>{{ linha.passante_acumulado | number:'1.2-2' }}</td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
            </div>

            <!-- Cards de Peneiras √ömidas -->
            <div *ngIf="analiseSelecionada?.peneiras_umidas?.peneiras && analiseSelecionada.peneiras_umidas.peneiras.length > 0">
                <h3 class="mb-3" style="color: #e6defa;">üíß Peneiras √ömidas</h3>
                
                <!-- Informa√ß√µes Gerais -->
                <div class="mb-4">
                    <div class="grid">
                        <div class="col-12 md:col-6">
                            <div
                                class="shadow-2 hover:shadow-4 transition-duration-200 p-3"
                                style="border-radius: 12px; background-color: #2b3a55;"
                            >
                                <div class="flex align-items-center justify-content-center">
                                    <i class="pi pi-box mr-2" style="color: #b3e5ff; font-size: 1.5rem;"></i>
                                    <div>
                                        <p class="mb-1" style="color: #d6f1ff; font-size: 0.8rem;">Massa da Amostra</p>
                                        <p class="mb-0" style="color: #b3e5ff; font-size: 1.5rem; font-weight: 700;">
                                            {{ analiseSelecionada.peneiras_umidas.amostra | number:'1.2-2' }} g
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 md:col-6">
                            <div
                                class="shadow-2 hover:shadow-4 transition-duration-200 p-3"
                                style="border-radius: 12px; background-color: #26413c;"
                            >
                                <div class="flex align-items-center justify-content-center">
                                    <i class="pi pi-filter mr-2" style="color: #b2f5ea; font-size: 1.5rem;"></i>
                                    <div>
                                        <p class="mb-1" style="color: #ccfbf1; font-size: 0.8rem;">Total de Finos</p>
                                        <p class="mb-0" style="color: #b2f5ea; font-size: 1.5rem; font-weight: 700;">
                                            {{ analiseSelecionada.peneiras_umidas.finos | number:'1.2-2' }} g
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabela de Peneiras √ömidas -->
                <div class="mb-3">
                    <div
                        class="shadow-2 p-3"
                        style="border-radius: 12px; background-color: #26413c; overflow-x: auto;"
                    >
                        <p-table [value]="analiseSelecionada.peneiras_umidas.peneiras" styleClass="p-datatable-sm">
                            <ng-template pTemplate="header">
                                <tr style="background-color: rgba(178, 245, 234, 0.1);">
                                    <th style="color: #b2f5ea;">Peneira</th>
                                    <th style="color: #b2f5ea;">Retido (g)</th>
                                    <th style="color: #b2f5ea;">Retido (%)</th>
                                    <th style="color: #b2f5ea;">Passante (%)</th>
                                    <th style="color: #b2f5ea;">Acumulado (%)</th>
                                    <th style="color: #b2f5ea;">Passante Acumulado (%)</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-linha>
                                <tr style="color: #ccfbf1;">
                                    <td><b>{{ linha.peneira }}</b></td>
                                    <td>{{ linha.valor_retido | number:'1.2-2' }}</td>
                                    <td>{{ linha.porcentual_retido | number:'1.2-2' }}</td>
                                    <td>{{ linha.passante | number:'1.2-2' }}</td>
                                    <td>{{ linha.acumulado | number:'1.2-2' }}</td>
                                    <td>{{ linha.passante_acumulado | number:'1.2-2' }}</td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
            </div>

            <!-- Cards de Substrato -->
            <div *ngIf="analiseSelecionada?.substrato?.linhas && analiseSelecionada.substrato.linhas.length > 0">
                <h3 class="mb-3" style="color: #e6defa;">üèóÔ∏è Resist√™ncia de Ader√™ncia ao Substrato</h3>
                
                <!-- M√©dia Geral -->
                <div class="mb-4" *ngIf="analiseSelecionada.substrato.media">
                    <div
                        class="shadow-2 hover:shadow-4 transition-duration-200 p-4"
                        style="border-radius: 12px; background-color: #4a4458;"
                    >
                        <div class="flex align-items-center justify-content-center">
                            <i class="pi pi-chart-line mr-3" style="color: #e3d8ff; font-size: 2rem;"></i>
                            <div class="text-center">
                                <p class="mb-1" style="color: #e6defa; font-size: 0.9rem;">Resist√™ncia M√©dia</p>
                                <p class="mb-0" style="color: #e3d8ff; font-size: 2rem; font-weight: 700;">
                                    {{ analiseSelecionada.substrato.media | number:'1.2-2' }} MPa
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabela de Substrato -->
                <div class="mb-3">
                    <div
                        class="shadow-2 p-3"
                        style="border-radius: 12px; background-color: #2b3a55; overflow-x: auto;"
                    >
                        <p-table [value]="analiseSelecionada.substrato.linhas" styleClass="p-datatable-sm">
                            <ng-template pTemplate="header">
                                <tr style="background-color: rgba(179, 229, 255, 0.1);">
                                    <th style="color: #b3e5ff;">N¬∫</th>
                                    <th style="color: #b3e5ff;">Di√¢metro (mm)</th>
                                    <th style="color: #b3e5ff;">√Årea (cm¬≤)</th>
                                    <th style="color: #b3e5ff;">Espessura (mm)</th>
                                    <th style="color: #b3e5ff;">Subst (mm)</th>
                                    <th style="color: #b3e5ff;">Junta (mm)</th>
                                    <th style="color: #b3e5ff;">Carga (kN)</th>
                                    <th style="color: #b3e5ff;">Resist√™ncia (MPa)</th>
                                    <th style="color: #b3e5ff;">Valida√ß√£o</th>
                                    <th style="color: #b3e5ff;">Rupturas</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-linha>
                                <tr style="color: #d6f1ff;">
                                    <td><b>{{ linha.numero }}</b></td>
                                    <td>{{ linha.diametro | number:'1.2-2' }}</td>
                                    <td>{{ linha.area | number:'1.2-2' }}</td>
                                    <td>{{ linha.espessura | number:'1.2-2' }}</td>
                                    <td>{{ linha.subst | number:'1.2-2' }}</td>
                                    <td>{{ linha.junta | number:'1.2-2' }}</td>
                                    <td>{{ linha.carga | number:'1.2-2' }}</td>
                                    <td><b>{{ linha.resist | number:'1.2-2' }}</b></td>
                                    <td>
                                        <span 
                                            [style.color]="linha.validacao === 'V√°lido' ? '#10b981' : linha.validacao === 'Inv√°lido' ? '#ef4444' : '#d6f1ff'"
                                            [style.font-weight]="'bold'"
                                        >
                                            {{ linha.validacao || '-' }}
                                        </span>
                                    </td>
                                    <td style="font-size: 0.85rem;">
                                        <div *ngIf="linha.rupturas">
                                            <span *ngIf="linha.rupturas.sub"><b>Sub:</b> {{ linha.rupturas.sub }}</span>
                                            <span *ngIf="linha.rupturas.subArga"> | <b>SubArga:</b> {{ linha.rupturas.subArga }}</span>
                                            <span *ngIf="linha.rupturas.rupArga"> | <b>RupArga:</b> {{ linha.rupturas.rupArga }}</span>
                                            <span *ngIf="linha.rupturas.argaCola"> | <b>ArgaCola:</b> {{ linha.rupturas.argaCola }}</span>
                                            <span *ngIf="linha.rupturas.colarPastilha"> | <b>ColarPast:</b> {{ linha.rupturas.colarPastilha }}</span>
                                        </div>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
            </div>

            <!-- Cards de Superficial -->
            <div *ngIf="analiseSelecionada?.superficial?.linhas && analiseSelecionada.superficial.linhas.length > 0">
                <h3 class="mb-3" style="color: #e6defa;">üîç Resist√™ncia de Ader√™ncia Superficial</h3>
                
                <!-- M√©dia Geral -->
                <div class="mb-4" *ngIf="analiseSelecionada.superficial.media">
                    <div
                        class="shadow-2 hover:shadow-4 transition-duration-200 p-4"
                        style="border-radius: 12px; background-color: #26413c;"
                    >
                        <div class="flex align-items-center justify-content-center">
                            <i class="pi pi-chart-line mr-3" style="color: #b2f5ea; font-size: 2rem;"></i>
                            <div class="text-center">
                                <p class="mb-1" style="color: #ccfbf1; font-size: 0.9rem;">Resist√™ncia M√©dia</p>
                                <p class="mb-0" style="color: #b2f5ea; font-size: 2rem; font-weight: 700;">
                                    {{ analiseSelecionada.superficial.media | number:'1.2-2' }} MPa
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabela de Superficial -->
                <div class="mb-3">
                    <div
                        class="shadow-2 p-3"
                        style="border-radius: 12px; background-color: #26413c; overflow-x: auto;"
                    >
                        <p-table [value]="analiseSelecionada.superficial.linhas" styleClass="p-datatable-sm">
                            <ng-template pTemplate="header">
                                <tr style="background-color: rgba(178, 245, 234, 0.1);">
                                    <th style="color: #b2f5ea;">N¬∫</th>
                                    <th style="color: #b2f5ea;">Di√¢metro (mm)</th>
                                    <th style="color: #b2f5ea;">√Årea (cm¬≤)</th>
                                    <th style="color: #b2f5ea;">Espessura (mm)</th>
                                    <th style="color: #b2f5ea;">Subst (mm)</th>
                                    <th style="color: #b2f5ea;">Junta (mm)</th>
                                    <th style="color: #b2f5ea;">Carga (kN)</th>
                                    <th style="color: #b2f5ea;">Resist√™ncia (MPa)</th>
                                    <th style="color: #b2f5ea;">Valida√ß√£o</th>
                                    <th style="color: #b2f5ea;">Rupturas</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-linha>
                                <tr style="color: #ccfbf1;">
                                    <td><b>{{ linha.numero }}</b></td>
                                    <td>{{ linha.diametro | number:'1.2-2' }}</td>
                                    <td>{{ linha.area | number:'1.2-2' }}</td>
                                    <td>{{ linha.espessura | number:'1.2-2' }}</td>
                                    <td>{{ linha.subst | number:'1.2-2' }}</td>
                                    <td>{{ linha.junta | number:'1.2-2' }}</td>
                                    <td>{{ linha.carga | number:'1.2-2' }}</td>
                                    <td><b>{{ linha.resist | number:'1.2-2' }}</b></td>
                                    <td>
                                        <span 
                                            [style.color]="linha.validacao === 'V√°lido' ? '#10b981' : linha.validacao === 'Inv√°lido' ? '#ef4444' : '#ccfbf1'"
                                            [style.font-weight]="'bold'"
                                        >
                                            {{ linha.validacao || '-' }}
                                        </span>
                                    </td>
                                    <td style="font-size: 0.85rem;">
                                        <div *ngIf="linha.rupturas">
                                            <span *ngIf="linha.rupturas.sub"><b>Sub:</b> {{ linha.rupturas.sub }}</span>
                                            <span *ngIf="linha.rupturas.subArga"> | <b>SubArga:</b> {{ linha.rupturas.subArga }}</span>
                                            <span *ngIf="linha.rupturas.rupArga"> | <b>RupArga:</b> {{ linha.rupturas.rupArga }}</span>
                                            <span *ngIf="linha.rupturas.argaCola"> | <b>ArgaCola:</b> {{ linha.rupturas.argaCola }}</span>
                                            <span *ngIf="linha.rupturas.colarPastilha"> | <b>ColarPast:</b> {{ linha.rupturas.colarPastilha }}</span>
                                        </div>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
            </div>

            <!-- Cards de Tra√ß√£o Normal -->
            <div *ngIf="analiseSelecionada?.tracao_normal?.linhas && analiseSelecionada.tracao_normal.linhas.length > 0">
                <h3 class="mb-3" style="color: #e6defa;">üí™ Tra√ß√£o Normal</h3>
                
                <!-- M√©dia Geral -->
                <div class="mb-4" *ngIf="analiseSelecionada.tracao_normal.media">
                    <div
                        class="shadow-2 hover:shadow-4 transition-duration-200 p-4"
                        style="border-radius: 12px; background-color: #3b3b32;"
                    >
                        <div class="flex align-items-center justify-content-center">
                            <i class="pi pi-chart-line mr-3" style="color: #fff3b0; font-size: 2rem;"></i>
                            <div class="text-center">
                                <p class="mb-1" style="color: #fff2a8; font-size: 0.9rem;">Resist√™ncia M√©dia</p>
                                <p class="mb-0" style="color: #fff3b0; font-size: 2rem; font-weight: 700;">
                                    {{ analiseSelecionada.tracao_normal.media | number:'1.2-2' }} MPa
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabela de Tra√ß√£o Normal -->
                <div class="mb-3">
                    <div
                        class="shadow-2 p-3"
                        style="border-radius: 12px; background-color: #3b3b32; overflow-x: auto;"
                    >
                        <p-table [value]="analiseSelecionada.tracao_normal.linhas" styleClass="p-datatable-sm">
                            <ng-template pTemplate="header">
                                <tr style="background-color: rgba(255, 243, 176, 0.1);">
                                    <th style="color: #fff3b0;">N¬∫</th>
                                    <th style="color: #fff3b0;">Di√¢metro (mm)</th>
                                    <th style="color: #fff3b0;">√Årea (cm¬≤)</th>
                                    <th style="color: #fff3b0;">Espessura (mm)</th>
                                    <th style="color: #fff3b0;">Subst (mm)</th>
                                    <th style="color: #fff3b0;">Junta (mm)</th>
                                    <th style="color: #fff3b0;">Carga (kN)</th>
                                    <th style="color: #fff3b0;">Resist√™ncia (MPa)</th>
                                    <th style="color: #fff3b0;">Valida√ß√£o</th>
                                    <th style="color: #fff3b0;">Rupturas</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-linha>
                                <tr style="color: #fff2a8;">
                                    <td><b>{{ linha.numero }}</b></td>
                                    <td>{{ linha.diametro | number:'1.2-2' }}</td>
                                    <td>{{ linha.area | number:'1.2-2' }}</td>
                                    <td>{{ linha.espessura | number:'1.2-2' }}</td>
                                    <td>{{ linha.subst | number:'1.2-2' }}</td>
                                    <td>{{ linha.junta | number:'1.2-2' }}</td>
                                    <td>{{ linha.carga | number:'1.2-2' }}</td>
                                    <td><b>{{ linha.resist | number:'1.2-2' }}</b></td>
                                    <td>
                                        <span 
                                            [style.color]="linha.validacao === 'V√°lido' ? '#10b981' : linha.validacao === 'Inv√°lido' ? '#ef4444' : '#fff2a8'"
                                            [style.font-weight]="'bold'"
                                        >
                                            {{ linha.validacao || '-' }}
                                        </span>
                                    </td>
                                    <td style="font-size: 0.85rem;">
                                        <div *ngIf="linha.rupturas">
                                            <span *ngIf="linha.rupturas.sub"><b>Sub:</b> {{ linha.rupturas.sub }}</span>
                                            <span *ngIf="linha.rupturas.subArga"> | <b>SubArga:</b> {{ linha.rupturas.subArga }}</span>
                                            <span *ngIf="linha.rupturas.rupArga"> | <b>RupArga:</b> {{ linha.rupturas.rupArga }}</span>
                                            <span *ngIf="linha.rupturas.argaCola"> | <b>ArgaCola:</b> {{ linha.rupturas.argaCola }}</span>
                                            <span *ngIf="linha.rupturas.colarPastilha"> | <b>ColarPast:</b> {{ linha.rupturas.colarPastilha }}</span>
                                        </div>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
            </div>

            <!-- Cards de Tra√ß√£o Submersa -->
            <div *ngIf="analiseSelecionada?.tracao_submersa?.linhas && analiseSelecionada.tracao_submersa.linhas.length > 0">
                <h3 class="mb-3" style="color: #e6defa;">üåä Tra√ß√£o Submersa</h3>
                
                <!-- M√©dia Geral -->
                <div class="mb-4" *ngIf="analiseSelecionada.tracao_submersa.media">
                    <div
                        class="shadow-2 hover:shadow-4 transition-duration-200 p-4"
                        style="border-radius: 12px; background-color: #2b3a55;"
                    >
                        <div class="flex align-items-center justify-content-center">
                            <i class="pi pi-chart-line mr-3" style="color: #a8b8d8; font-size: 2rem;"></i>
                            <div class="text-center">
                                <p class="mb-1" style="color: #c8d4e8; font-size: 0.9rem;">Resist√™ncia M√©dia</p>
                                <p class="mb-0" style="color: #a8b8d8; font-size: 2rem; font-weight: 700;">
                                    {{ analiseSelecionada.tracao_submersa.media | number:'1.2-2' }} MPa
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabela de Tra√ß√£o Submersa -->
                <div class="mb-3">
                    <div
                        class="shadow-2 p-3"
                        style="border-radius: 12px; background-color: #2b3a55; overflow-x: auto;"
                    >
                        <p-table [value]="analiseSelecionada.tracao_submersa.linhas" styleClass="p-datatable-sm">
                            <ng-template pTemplate="header">
                                <tr style="background-color: rgba(168, 184, 216, 0.1);">
                                    <th style="color: #a8b8d8;">N¬∫</th>
                                    <th style="color: #a8b8d8;">Di√¢metro (mm)</th>
                                    <th style="color: #a8b8d8;">√Årea (cm¬≤)</th>
                                    <th style="color: #a8b8d8;">Espessura (mm)</th>
                                    <th style="color: #a8b8d8;">Subst (mm)</th>
                                    <th style="color: #a8b8d8;">Junta (mm)</th>
                                    <th style="color: #a8b8d8;">Carga (kN)</th>
                                    <th style="color: #a8b8d8;">Resist√™ncia (MPa)</th>
                                    <th style="color: #a8b8d8;">Valida√ß√£o</th>
                                    <th style="color: #a8b8d8;">Rupturas</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-linha>
                                <tr style="color: #c8d4e8;">
                                    <td><b>{{ linha.numero }}</b></td>
                                    <td>{{ linha.diametro | number:'1.2-2' }}</td>
                                    <td>{{ linha.area | number:'1.2-2' }}</td>
                                    <td>{{ linha.espessura | number:'1.2-2' }}</td>
                                    <td>{{ linha.subst | number:'1.2-2' }}</td>
                                    <td>{{ linha.junta | number:'1.2-2' }}</td>
                                    <td>{{ linha.carga | number:'1.2-2' }}</td>
                                    <td><b>{{ linha.resist | number:'1.2-2' }}</b></td>
                                    <td>
                                        <span 
                                            [style.color]="linha.validacao === 'V√°lido' ? '#10b981' : linha.validacao === 'Inv√°lido' ? '#ef4444' : '#c8d4e8'"
                                            [style.font-weight]="'bold'"
                                        >
                                            {{ linha.validacao || '-' }}
                                        </span>
                                    </td>
                                    <td style="font-size: 0.85rem;">
                                        <div *ngIf="linha.rupturas">
                                            <span *ngIf="linha.rupturas.sub"><b>Sub:</b> {{ linha.rupturas.sub }}</span>
                                            <span *ngIf="linha.rupturas.subArga"> | <b>SubArga:</b> {{ linha.rupturas.subArga }}</span>
                                            <span *ngIf="linha.rupturas.rupArga"> | <b>RupArga:</b> {{ linha.rupturas.rupArga }}</span>
                                            <span *ngIf="linha.rupturas.argaCola"> | <b>ArgaCola:</b> {{ linha.rupturas.argaCola }}</span>
                                            <span *ngIf="linha.rupturas.colarPastilha"> | <b>ColarPast:</b> {{ linha.rupturas.colarPastilha }}</span>
                                        </div>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
            </div>

            <!-- Cards de Tra√ß√£o Estufa -->
            <div *ngIf="analiseSelecionada?.tracao_estufa?.linhas && analiseSelecionada.tracao_estufa.linhas.length > 0">
                <h3 class="mb-3" style="color: #e6defa;">üî• Tra√ß√£o Estufa</h3>
                
                <!-- M√©dia Geral -->
                <div class="mb-4" *ngIf="analiseSelecionada.tracao_estufa.media">
                    <div
                        class="shadow-2 hover:shadow-4 transition-duration-200 p-4"
                        style="border-radius: 12px; background-color: #4a4458;"
                    >
                        <div class="flex align-items-center justify-content-center">
                            <i class="pi pi-chart-line mr-3" style="color: #c8b6e2; font-size: 2rem;"></i>
                            <div class="text-center">
                                <p class="mb-1" style="color: #d8c8f0; font-size: 0.9rem;">Resist√™ncia M√©dia</p>
                                <p class="mb-0" style="color: #c8b6e2; font-size: 2rem; font-weight: 700;">
                                    {{ analiseSelecionada.tracao_estufa.media | number:'1.2-2' }} MPa
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabela de Tra√ß√£o Estufa -->
                <div class="mb-3">
                    <div
                        class="shadow-2 p-3"
                        style="border-radius: 12px; background-color: #4a4458; overflow-x: auto;"
                    >
                        <p-table [value]="analiseSelecionada.tracao_estufa.linhas" styleClass="p-datatable-sm">
                            <ng-template pTemplate="header">
                                <tr style="background-color: rgba(200, 182, 226, 0.1);">
                                    <th style="color: #c8b6e2;">N¬∫</th>
                                    <th style="color: #c8b6e2;">Di√¢metro (mm)</th>
                                    <th style="color: #c8b6e2;">√Årea (cm¬≤)</th>
                                    <th style="color: #c8b6e2;">Espessura (mm)</th>
                                    <th style="color: #c8b6e2;">Subst (mm)</th>
                                    <th style="color: #c8b6e2;">Junta (mm)</th>
                                    <th style="color: #c8b6e2;">Carga (kN)</th>
                                    <th style="color: #c8b6e2;">Resist√™ncia (MPa)</th>
                                    <th style="color: #c8b6e2;">Valida√ß√£o</th>
                                    <th style="color: #c8b6e2;">Rupturas</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-linha>
                                <tr style="color: #d8c8f0;">
                                    <td><b>{{ linha.numero }}</b></td>
                                    <td>{{ linha.diametro | number:'1.2-2' }}</td>
                                    <td>{{ linha.area | number:'1.2-2' }}</td>
                                    <td>{{ linha.espessura | number:'1.2-2' }}</td>
                                    <td>{{ linha.subst | number:'1.2-2' }}</td>
                                    <td>{{ linha.junta | number:'1.2-2' }}</td>
                                    <td>{{ linha.carga | number:'1.2-2' }}</td>
                                    <td><b>{{ linha.resist | number:'1.2-2' }}</b></td>
                                    <td>
                                        <span 
                                            [style.color]="linha.validacao === 'V√°lido' ? '#10b981' : linha.validacao === 'Inv√°lido' ? '#ef4444' : '#d8c8f0'"
                                            [style.font-weight]="'bold'"
                                        >
                                            {{ linha.validacao || '-' }}
                                        </span>
                                    </td>
                                    <td style="font-size: 0.85rem;">
                                        <div *ngIf="linha.rupturas">
                                            <span *ngIf="linha.rupturas.sub"><b>Sub:</b> {{ linha.rupturas.sub }}</span>
                                            <span *ngIf="linha.rupturas.subArga"> | <b>SubArga:</b> {{ linha.rupturas.subArga }}</span>
                                            <span *ngIf="linha.rupturas.rupArga"> | <b>RupArga:</b> {{ linha.rupturas.rupArga }}</span>
                                            <span *ngIf="linha.rupturas.argaCola"> | <b>ArgaCola:</b> {{ linha.rupturas.argaCola }}</span>
                                            <span *ngIf="linha.rupturas.colarPastilha"> | <b>ColarPast:</b> {{ linha.rupturas.colarPastilha }}</span>
                                        </div>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
            </div>

            <!-- Cards de Tra√ß√£o Tempo Aberto -->
            <div *ngIf="analiseSelecionada?.tracao_tempo_aberto?.linhas && analiseSelecionada.tracao_tempo_aberto.linhas.length > 0">
                <h3 class="mb-3" style="color: #e6defa;">‚è±Ô∏è Tra√ß√£o Tempo Aberto</h3>
                
                <!-- M√©dia Geral -->
                <div class="mb-4" *ngIf="analiseSelecionada.tracao_tempo_aberto.media && typeof analiseSelecionada.tracao_tempo_aberto.media === 'number'">
                    <div
                        class="shadow-2 hover:shadow-4 transition-duration-200 p-4"
                        style="border-radius: 12px; background-color: #26413c;"
                    >
                        <div class="flex align-items-center justify-content-center">
                            <i class="pi pi-chart-line mr-3" style="color: #88c0b4; font-size: 2rem;"></i>
                            <div class="text-center">
                                <p class="mb-1" style="color: #a0d4c8; font-size: 0.9rem;">Resist√™ncia M√©dia</p>
                                <p class="mb-0" style="color: #88c0b4; font-size: 2rem; font-weight: 700;">
                                    {{ analiseSelecionada.tracao_tempo_aberto.media | number:'1.2-2' }} MPa
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tabela de Tra√ß√£o Tempo Aberto -->
                <div class="mb-3">
                    <div
                        class="shadow-2 p-3"
                        style="border-radius: 12px; background-color: #26413c; overflow-x: auto;"
                    >
                        <p-table [value]="analiseSelecionada.tracao_tempo_aberto.linhas" styleClass="p-datatable-sm">
                            <ng-template pTemplate="header">
                                <tr style="background-color: rgba(136, 192, 180, 0.1);">
                                    <th style="color: #88c0b4;">N¬∫</th>
                                    <th style="color: #88c0b4;">Di√¢metro (mm)</th>
                                    <th style="color: #88c0b4;">√Årea (cm¬≤)</th>
                                    <th style="color: #88c0b4;">Espessura (mm)</th>
                                    <th style="color: #88c0b4;">Subst (mm)</th>
                                    <th style="color: #88c0b4;">Junta (mm)</th>
                                    <th style="color: #88c0b4;">Carga (kN)</th>
                                    <th style="color: #88c0b4;">Resist√™ncia (MPa)</th>
                                    <th style="color: #88c0b4;">Valida√ß√£o</th>
                                    <th style="color: #88c0b4;">Rupturas</th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-linha>
                                <tr style="color: #a0d4c8;">
                                    <td><b>{{ linha.numero }}</b></td>
                                    <td>{{ linha.diametro | number:'1.2-2' }}</td>
                                    <td>{{ linha.area | number:'1.2-2' }}</td>
                                    <td>{{ linha.espessura | number:'1.2-2' }}</td>
                                    <td>{{ linha.subst | number:'1.2-2' }}</td>
                                    <td>{{ linha.junta | number:'1.2-2' }}</td>
                                    <td>{{ linha.carga | number:'1.2-2' }}</td>
                                    <td><b>{{ linha.resist | number:'1.2-2' }}</b></td>
                                    <td>
                                        <span 
                                            [style.color]="linha.validacao === 'V√°lido' ? '#10b981' : linha.validacao === 'Inv√°lido' ? '#ef4444' : '#a0d4c8'"
                                            [style.font-weight]="'bold'"
                                        >
                                            {{ linha.validacao || '-' }}
                                        </span>
                                    </td>
                                    <td style="font-size: 0.85rem;">
                                        <div *ngIf="linha.rupturas">
                                            <span *ngIf="linha.rupturas.sub"><b>Sub:</b> {{ linha.rupturas.sub }}</span>
                                            <span *ngIf="linha.rupturas.subArga"> | <b>SubArga:</b> {{ linha.rupturas.subArga }}</span>
                                            <span *ngIf="linha.rupturas.rupArga"> | <b>RupArga:</b> {{ linha.rupturas.rupArga }}</span>
                                            <span *ngIf="linha.rupturas.argaCola"> | <b>ArgaCola:</b> {{ linha.rupturas.argaCola }}</span>
                                            <span *ngIf="linha.rupturas.colarPastilha"> | <b>ColarPast:</b> {{ linha.rupturas.colarPastilha }}</span>
                                        </div>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                </div>
            </div>    

            <!-- <div class=" flex w-12 gap-3 mt-4 justify-content-center text-center">
                <p-button 
                    label="Imprimir" 
                    (onClick)="imprimirVisualizar(analiseSelecionada)"
                    severity="success"
                    icon="pi pi-print" 
                    iconPos="right" 
                    tooltipPosition="top"
                    pTooltip="Gerar Impress√£o"
                />
            </div> -->

        </div>
    </p-drawer>